(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{217:function(e,t,n){e.exports=n(366)},366:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(42),s=n.n(l),c=n(16),i=n(17),o=n(19),u=n(18),m=n(20),d=n(9),h=n(52),p=n(14);function f(e){return{type:"AUTHORIZATION_SUCCESS",currentUser:e}}var E=n(23),b=n(381),_=n(60),y=n(373),v=n(383),g=n(376),C=n(384),S=n(367),I=n(375),O="http://35.223.24.126/api",A=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_.a,{name:"music",circular:!0}),r.a.createElement(b.a.Content,null,"Welcome to Easo's Music Lessons Organizer"),r.a.createElement(b.a.Subheader,null,"A new and personalized application for music schools")),r.a.createElement(y.a,null),r.a.createElement(v.a,{textAlign:"center",verticalAlign:"middle"},r.a.createElement(v.a.Column,{style:{maxWidth:450}},r.a.createElement(b.a,{as:"h2",color:"black",textAlign:"center"},"Log-in to your account"),r.a.createElement(g.a,{size:"large",onSubmit:function(t){return e.props.handleSubmit(t.target.username.value,t.target.password.value)}},r.a.createElement(C.a,null,r.a.createElement(g.a.Input,{id:"username",fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",type:"text"}),r.a.createElement(g.a.Input,{id:"password",fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password"}),r.a.createElement(S.a,{color:"black",fluid:!0,size:"large"},"Login"))))),r.a.createElement(y.a,null),r.a.createElement(I.a,{text:!0},r.a.createElement(b.a,{as:"h2"},"What is Easo's Music Lessons Organizer?"),r.a.createElement("p",null,"This is an application developed by Roysan Easo. This application is primarily used to organize students for a music school and keep track of information such as lessons, attendance, and so on. It is also designed to make the enrollment process easier by doing things like automatically sending emails upon enrollment. Because it is in the early development stages, Roysan is able to add or change features to accomodate users upon request.")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(I.a,{text:!0},r.a.createElement(b.a,{as:"h2"},"How much does it cost?"),r.a.createElement("p",null,"Because this application has only recently been created and is only managed by one person, it is currently free!")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(I.a,{text:!0},r.a.createElement(b.a,{as:"h2"},"How can I get started?"),r.a.createElement("p",null,"Simply send an email to easo.roysan@gmail.com and Roysan will keep direct contact with you to answer any questions you may have and set up an account for you.")))}}]),t}(r.a.Component),T={handleSubmit:function(e,t){return function(n){fetch("".concat(O,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("token",e.token),"Confirmed"===e.message?n(f(Object(E.a)({},e.current_user,{schools:e.schools}))):(n({type:"AUTHORIZATION_FAIL"}),alert(e.message))})}}},k=Object(p.b)(function(e){return{authorized:e.users}},T)(A),j=n(377);function w(e){return{type:"FETCH_LESSONS",lessons:e}}function H(e){return{type:"UPDATE_LESSONS",lesson:e}}function N(e){return{type:"FETCH_DESIRED_LESSON",lesson:e}}var F=n(378),D=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={submitted:!1,makeUpStatus:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this,n=this.state.makeUpStatus,a={lesson_id:this.props.lesson.id,school_id:this.props.lesson.school_id};["date","status","make_up","cancelled_date"].forEach(function(t){a[t]="make_up"===t?n:"cancelled_date"!==t||n?e[t].value:null}),fetch("".concat(O,"/attendances"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(t.setState({submitted:!0}),t.props.dispatch(N(e)),t.props.dispatch(H(e)),t.intervalID=setInterval(function(){return t.setState({submitted:!1})},3e3))})}},{key:"componentDidMount",value:function(){N(this.props.lesson)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=new Date,n=function(e){return e<=99?"0".concat(e).slice(-2):e},a="".concat(t.getFullYear(),"-").concat(n(t.getMonth()+1),"-").concat(n(t.getDate()));return r.a.createElement("div",null,r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{id:"date",type:"date",defaultValue:a,required:!0,fluid:!0,label:"Date"}),r.a.createElement(g.a.Input,{id:"status",required:!0,fluid:!0,label:"Status"})),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Dropdown,{selection:!0,options:[{key:1,value:!0,text:"True"},{key:2,value:!1,text:"False"}],value:this.state.makeUpStatus,label:"Make-Up",onChange:function(t,n){e.setState({makeUpStatus:n.value})}}),this.state.makeUpStatus?r.a.createElement(g.a.Input,{required:!0,id:"cancelled_date",type:"date",fluid:!0,label:"Cancelled Date"}):null),r.a.createElement(S.a,{type:"submit"},"Add Attendance"),this.state.submitted?r.a.createElement(F.a,{success:!0,header:"Attendance submitted"}):null))}}]),t}(r.a.Component),U=Object(p.b)(function(e){return{lesson:e.desiredLesson}})(D),L=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.initialFetch()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_.a,{name:"music",circular:!0}),r.a.createElement(b.a.Content,null,"Hello ",this.props.currentUser.first_name),r.a.createElement(b.a.Subheader,null,"Here are today's lessons")),this.props.currentUser.schools.map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(y.a,null),r.a.createElement(b.a,{as:"h2"},r.a.createElement(b.a.Content,null,t.name)),r.a.createElement(j.a,{celled:!0},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Instructor"),r.a.createElement(j.a.HeaderCell,null,"Time"),r.a.createElement(j.a.HeaderCell,null,"Student"),r.a.createElement(j.a.HeaderCell,null,"Instrument"),r.a.createElement(j.a.HeaderCell,null,"Last Attendance"))),r.a.createElement(j.a.Body,null,e.props.lessons.filter(function(e){return e.school.name===t.name&&e.active}).sort(function(e,t){return e.instructor.last_name>t.instructor.last_name?1:e.instructor.last_name<t.instructor.last_name?-1:0}).map(function(t){var n={};t.attendances.length>0&&(n=t.attendances[t.attendances.length-1]);var a=n,l=a.date,s=a.status,c=a.make_up,i=a.cancelled_date;return r.a.createElement(j.a.Row,{key:t.id},r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/instructors/".concat(t.instructor.id)},t.instructor.first_name," ",t.instructor.last_name)),r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/lessons/".concat(t.id)},t.class_time.day," | ",t.class_time.start_time,"-",t.class_time.end_time),e.props.lesson_id!==t.id?r.a.createElement(S.a,{onClick:function(){return e.props.showForm(t)}},"Add an Attendance"):r.a.createElement(S.a,{onClick:function(){return e.props.hideForm()}},"Hide Form"),e.props.lesson_id===t.id?r.a.createElement(U,null):null),r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/students/".concat(t.student.id)},t.student.first_name," ",t.student.last_name)),r.a.createElement(j.a.Cell,null,t.instrument),r.a.createElement(j.a.Cell,null,t.attendances.length>0?"".concat(l," | ").concat(s," ").concat(c?"| Make-up for lesson missed on ".concat(i):""):null))}))))}))}}]),t}(r.a.Component),R={initialFetch:function(){return function(e){var t=new Date;fetch("".concat(O,"/lessons/day_").concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"][t.getDay()]),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e({type:"AUTHORIZATION_FAIL"}):e(w(t))})}},showForm:function(e){return function(t){return t(N(e))}},hideForm:function(){return function(e){return e(N({class_time:{start_time:""},student:{},instructor:{},attendances:[],school:{},instrument:"",instructor_notes:"",misc_notes:""}))}}},x=Object(p.b)(function(e){return{currentUser:e.currentUser,lessons:e.lessons,lesson_id:e.desiredLesson.id}},R)(L),q=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){r.a.createElement("div",null);return this.props.authorized?r.a.createElement(x,null):r.a.createElement(k,null)}}]),t}(r.a.Component),M=Object(p.b)(function(e){return{authorized:e.currentUser.authorized}})(q),G=n(385),z=n(379),B=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,homeButton:{background:"black"},instructorButton:{background:"black"},studentButton:{background:"black"},familyButton:{background:"black"},clientButton:{background:"black"},logoutButton:{background:"black"}},n.handleHideClick=function(){return n.setState({visible:!1})},n.handleShowClick=function(){return n.setState({visible:!0})},n.handleSidebarHide=function(){return n.setState({visible:!1})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.visible;return this.props.currentUser.authorized?r.a.createElement("div",null,r.a.createElement(S.a.Group,null,r.a.createElement(S.a,{disabled:t,onClick:this.handleShowClick},"Menu")),r.a.createElement(G.a,{as:z.a,animation:"overlay",icon:"labeled",inverted:!0,onHide:this.handleSidebarHide,vertical:!0,visible:t,width:"thin"},r.a.createElement(d.b,{to:"/",onClick:this.handleHideClick},r.a.createElement(z.a.Item,{style:this.state.homeButton,onMouseEnter:function(){return e.setState({homeButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({homeButton:{background:"black"}})}},r.a.createElement(_.a,{name:"home"}),"Home")),r.a.createElement(d.b,{to:"/instructors",onClick:this.handleHideClick},r.a.createElement(z.a.Item,{style:this.state.instructorButton,onMouseEnter:function(){return e.setState({instructorButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({instructorButton:{background:"black"}})}},r.a.createElement(_.a,{name:"microphone"}),"Instructors")),r.a.createElement(d.b,{to:"/students",onClick:this.handleHideClick},r.a.createElement(z.a.Item,{style:this.state.studentButton,onMouseEnter:function(){return e.setState({studentButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({studentButton:{background:"black"}})}},r.a.createElement(_.a,{name:"headphones"}),"Students")),r.a.createElement(d.b,{to:"/families",onClick:this.handleHideClick},r.a.createElement(z.a.Item,{style:this.state.familyButton,onMouseEnter:function(){return e.setState({familyButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({familyButton:{background:"black"}})}},r.a.createElement(_.a,{name:"group"}),"Families")),r.a.createElement(d.b,{to:"/contacts",onClick:this.handleHideClick},r.a.createElement(z.a.Item,{style:this.state.clientButton,onMouseEnter:function(){return e.setState({clientButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({clientButton:{background:"black"}})}},r.a.createElement(_.a,{name:"phone"}),"Contacts")),r.a.createElement(d.b,{to:"/",onClick:function(){e.handleHideClick(),localStorage.setItem("token","logged out"),window.location.reload()}},r.a.createElement(z.a.Item,{style:this.state.logoutButton,onMouseEnter:function(){return e.setState({logoutButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({logoutButton:{background:"black"}})}},r.a.createElement(_.a,{name:"log out"}),"Logout")))):(localStorage.setItem("token","logged out"),r.a.createElement(h.a,{to:"/"}))}}]),t}(r.a.Component),P=Object(p.b)(function(e){return{currentUser:e.currentUser}})(B);function Z(e){return{type:"FETCH_DESIRED_STUDENT",student:e}}var Q=n(380),J=n(47),W=n.n(J),V=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={searchQuery:"",isLoading:!1},n.setSearchQuery=W()(function(e){console.log(e),n.setState({searchQuery:e,isLoading:!1})},500),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.students;if(""!==this.state.searchQuery){var n=this.state.searchQuery.toUpperCase();t=this.props.students.filter(function(e){return e.first_name.toUpperCase().includes(n)||e.last_name.toUpperCase().includes(n)||e.phone_number.toUpperCase().includes(n)||e.family.family_name.toUpperCase().includes(n)})}return r.a.createElement("div",null,r.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_.a,{name:"headphones"}),r.a.createElement(b.a.Content,null,"Students")),r.a.createElement(Q.a,{open:!1,loading:this.state.isLoading,size:"small",style:{marginLeft:"10px"},placeholder:"Name or Phone Number",onSearchChange:function(t){e.setState({isLoading:!0}),e.setSearchQuery(t.target.value)}}),r.a.createElement(j.a,{celled:!0},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Name"),r.a.createElement(j.a.HeaderCell,null,"Family Name"),r.a.createElement(j.a.HeaderCell,null,"School"),r.a.createElement(j.a.HeaderCell,null,"Phone Number"),r.a.createElement(j.a.HeaderCell,null,"Email"),r.a.createElement(j.a.HeaderCell,null,"Date of Birth"))),r.a.createElement(j.a.Body,null,t.map(function(e){return r.a.createElement(j.a.Row,{key:e.id},r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/students/".concat(e.id)},e.first_name," ",e.last_name)),r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/families/".concat(e.family_id)},e.family.family_name)),r.a.createElement(j.a.Cell,null,e.school.name),r.a.createElement(j.a.Cell,null,e.phone_number),r.a.createElement(j.a.Cell,null,e.email),r.a.createElement(j.a.Cell,null,e.date_of_birth))}))))}},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(O,"/students"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(function(e){return{type:"FETCH_STUDENTS",students:e}}(t))})}}]),t}(r.a.Component),Y=Object(p.b)(function(e){return{students:e.students}})(V);function X(e){return{type:"FETCH_INSTRUCTORS",instructors:e}}function K(e){return{type:"FETCH_DESIRED_INSTRUCTOR",instructor:e}}var $=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={submitted:!1,instructorChosen:!1,instructor_id:null,class_id:null,instrument:null},n.instructorSelect=function(e){null!==e&&fetch("".concat(O,"/instructors/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){e.error?n.props.dispatch({type:"AUTHORIZATION_FAIL"}):(n.props.dispatch(K(e)),n.setState({instructorChosen:!0}))})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(this.state.instrument)if(this.state.class_id){var n=this.state.class_id,a=this.state.instrument,r={class_time_id:n,student_id:this.props.student.id,school_id:this.props.student.school_id,instrument:a,active:!0,instructor_notes:e.instructor_notes.value,misc_notes:e.misc_notes.value};console.log(r),fetch("".concat(O,"/lessons"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){console.log(e),e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(t.props.dispatch(function(e){return{type:"ADD_DESIRED_LESSON",lesson:e}}(e)),t.setState({submitted:!0,instructorChosen:!1,instructor_id:null}),t.intervalID=setInterval(function(){t.setState({submitted:!1})},2e3))})}else alert("Please select a class time");else alert("Please select an instrument")}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.instructors.filter(function(e){return e.active&&e.class_times.length>0&&e.class_times.some(function(e){return e.active})}).map(function(e){return{key:e.id,value:e.id,text:"".concat(e.first_name," ").concat(e.last_name)}}),n=this.props.selectedInstructor,a=n.instrument_1,l=n.instrument_2,s=n.instrument_3,c=n.class_times.filter(function(e){return e.active}).map(function(e){var t=e.start_time.split("T")[1],n="".concat(t.split(":")[0],":").concat(t.split(":")[1]),a=e.end_time.split("T")[1],r="".concat(a.split(":")[0],":").concat(a.split(":")[1]);return{key:e.id,value:e.id,text:"".concat(e.day," | ").concat(n,"-").concat(r)}}),i=[a,l,s].filter(function(e){return""!==e}).map(function(e){return{key:e,value:e,text:e}});return r.a.createElement("div",null,r.a.createElement(y.a,null),r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Select,{id:"instructor",search:!0,required:!0,options:t,value:this.state.instructor_id,label:"Instructor",onChange:function(t,n){e.setState({instructor_id:n.value}),e.instructorSelect(n.value)}}),this.state.instructorChosen?r.a.createElement(g.a.Select,{id:"instrument",required:!0,options:i,value:this.state.instrument,label:"Instrument",onChange:function(t,n){e.setState({instrument:n.value})}}):null,this.state.instructorChosen?r.a.createElement(g.a.Select,{id:"class_time",search:!0,required:!0,options:c,value:this.state.class_id,label:"Class Time",onChange:function(t,n){e.setState({class_id:n.value})}}):null),this.state.instructorChosen?r.a.createElement("div",null,r.a.createElement(g.a.TextArea,{id:"instructor_notes",label:"Instructor Notes"}),r.a.createElement(g.a.TextArea,{id:"misc_notes",label:"Miscellaneous Notes"}),r.a.createElement(S.a,{type:"submit"},"Add Lesson")):null,this.state.submitted?r.a.createElement(F.a,{success:!0,header:"Lesson has been added"}):null),r.a.createElement(y.a,null))}},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(O,"/instructors"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){if(t.error)e.props.dispatch({type:"AUTHORIZATION_FAIL"});else{var n=t.filter(function(t){return t.schools.map(function(e){return e.id}).includes(e.props.student.school_id)&&t.active});e.props.dispatch(X(n))}})}}]),t}(r.a.Component),ee=Object(p.b)(function(e){return{currentUser:e.currentUser,student:e.desiredStudent,instructors:e.instructors,selectedInstructor:e.desiredInstructor}})($),te=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={addLessonForm:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.a,null),r.a.createElement(b.a,{as:"h2",textAlign:"center"},r.a.createElement(b.a.Content,null,"Lessons"),r.a.createElement("br",null),r.a.createElement(S.a,{onClick:function(){return e.setState({addLessonForm:!e.state.addLessonForm})}},this.state.addLessonForm?"Hide Form":"Add a Lesson")),this.state.addLessonForm?r.a.createElement(ee,null):null,r.a.createElement(j.a,{celled:!0},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Time"),r.a.createElement(j.a.HeaderCell,null,"Status"),r.a.createElement(j.a.HeaderCell,null,"Instructor"),r.a.createElement(j.a.HeaderCell,null,"Instructor Notes"))),r.a.createElement(j.a.Body,null,this.props.lessons.map(function(e){var t=e.class_time,n=t.day,a=t.start_time,l=t.end_time;return r.a.createElement(j.a.Row,{key:e.id},r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/lessons/".concat(e.id)},n," | ",a,"-",l," | ",e.instrument)),r.a.createElement(j.a.Cell,null,e.active?"Active":"Inactive"),r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/instructors/".concat(e.instructor.id)},e.instructor.first_name," ",e.instructor.last_name)),r.a.createElement(j.a.Cell,null,e.instructor_notes))}))),r.a.createElement(y.a,null))}},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(O,"/lessons/student_").concat(this.props.student_id),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(w(t))})}}]),t}(r.a.Component),ne=Object(p.b)(function(e){return{lessons:e.lessons,student_id:e.desiredStudent.id}})(te),ae=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={old_student:{},success:!1,showLessons:!1},n.handleChange=function(e,t){return n.props.dispatch(function(e,t){return{type:"STUDENT_ONCHANGE",key:e,value:t}}(e,t))},n.handleSubmit=function(){fetch("".concat(O,"/students/").concat(n.props.student.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n.props.student)}).then(function(e){return e.json()}).then(function(e){n.setState({success:!0,old_student:e}),n.intervalID=setInterval(function(){n.setState({success:!1})},1e3)})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.student,n=t.first_name,a=t.last_name,l=t.phone_number,s=t.email,c=t.date_of_birth,i=t.misc_notes,o=t.medical_notes,u=t.billing_notes,m=t.family_id;return r.a.createElement("div",null,r.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_.a,{name:"headphones"}),r.a.createElement(b.a.Content,null,this.state.old_student.first_name," ",this.state.old_student.last_name),r.a.createElement(d.b,{to:"/families/".concat(m)},r.a.createElement(S.a,null,"Go to Family Page")),r.a.createElement(S.a,{onClick:function(){return e.setState({showLessons:!e.state.showLessons})}},this.state.showLessons?"Hide":"Show"," Lessons")),this.state.showLessons?r.a.createElement(ne,null):r.a.createElement(y.a,null),r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(){return e.handleSubmit}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{fluid:!0,label:"First name",value:n,onChange:function(t){return e.handleChange("first_name",t.target.value)}}),r.a.createElement(g.a.Input,{fluid:!0,label:"Last name",value:a,onChange:function(t){return e.handleChange("last_name",t.target.value)}}),r.a.createElement(g.a.Input,{fluid:!0,label:"Date of birth",type:"date",value:c,onChange:function(t){return e.handleChange("date_of_birth",t.target.value)}})),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{fluid:!0,label:"Phone Number",type:"text",value:l,onChange:function(t){return e.handleChange("phone_number",t.target.value)}}),r.a.createElement(g.a.Input,{fluid:!0,label:"Email",type:"email",value:s,onChange:function(t){return e.handleChange("email",t.target.value)}})),r.a.createElement(g.a.TextArea,{label:"Medical Notes",value:o,onChange:function(t){return e.handleChange("medical_notes",t.target.value)}}),r.a.createElement(g.a.TextArea,{label:"Billing Notes",value:u,onChange:function(t){return e.handleChange("billing_notes",t.target.value)}}),r.a.createElement(g.a.TextArea,{label:"Miscellaneous Notes",value:i,onChange:function(t){return e.handleChange("misc_notes",t.target.value)}}),r.a.createElement(S.a,{type:"submit",onClick:this.handleSubmit},"Save Changes"),r.a.createElement(S.a,{onClick:function(){return e.props.dispatch(Z(e.state.old_student))}},"Revert Changes"),this.state.success?r.a.createElement(F.a,{success:!0,header:"Changes have been saved"}):null))}},{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/").pop();fetch("".concat(O,"/students/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({old_student:t}),t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(Z(t))})}}]),t}(r.a.Component),re=Object(p.b)(function(e){return{student:e.desiredStudent}})(ae),le=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={school_ids:[],submitted:!1,instructor_id:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(this.state.school_ids.length<=0)alert("Please select at least one school");else{var n={active:!0,schools:this.state.school_ids};["first_name","last_name","date_of_birth","billing_address","pay_rate","phone_number","emergency_number","email","instrument_1","instrument_2","instrument_3","biography","misc_notes"].forEach(function(t){return n[t]=e[t].value}),fetch("".concat(O,"/instructors"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(alert("The instructor has been added. Confirm to redirect to the instructor's information"),t.setState({submitted:!0,instructor_id:e.id}))})}}},{key:"render",value:function(){var e=this,t=this.props.currentUser.schools.map(function(e){return{key:e.id,value:e.id,text:e.name}});return r.a.createElement("div",null,this.state.submitted?r.a.createElement(h.a,{to:"/instructors/".concat(this.state.instructor_id)}):null,r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{id:"first_name",required:!0,fluid:!0,label:"First name"}),r.a.createElement(g.a.Input,{id:"last_name",required:!0,fluid:!0,label:"Last name"}),r.a.createElement(g.a.Input,{id:"date_of_birth",defaultValue:"2000-01-01",required:!0,fluid:!0,label:"Date of birth",type:"date"})),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{id:"billing_address",fluid:!0,label:"Billing Address"})),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Select,{id:"schools",required:!0,multiple:!0,value:this.state.school_ids,options:t,label:"Schools",onChange:function(t,n){return e.setState({school_ids:n.value})}}),r.a.createElement(g.a.Input,{id:"pay_rate",defaultValue:0,fluid:!0,label:"Pay Rate",type:"number"})),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{id:"phone_number",required:!0,fluid:!0,label:"Phone Number",type:"text"}),r.a.createElement(g.a.Input,{id:"emergency_number",fluid:!0,label:"Emergency Number",type:"tel"}),r.a.createElement(g.a.Input,{id:"email",required:!0,fluid:!0,label:"Email",type:"email"})),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{id:"instrument_1",required:!0,fluid:!0,label:"Instrument 1"}),r.a.createElement(g.a.Input,{id:"instrument_2",fluid:!0,label:"Instrument 2"}),r.a.createElement(g.a.Input,{id:"instrument_3",fluid:!0,label:"Instrument 3"})),r.a.createElement(g.a.TextArea,{id:"biography",label:"Biography"}),r.a.createElement(g.a.TextArea,{id:"misc_notes",label:"Miscellaneous Notes"}),r.a.createElement(S.a,{type:"submit"},"Add Instructor")))}}]),t}(r.a.Component),se=Object(p.b)(function(e){return{currentUser:e.currentUser}})(le),ce=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={newForm:!1,searchQuery:"",isLoading:!1},n.setSearchQuery=W()(function(e){n.setState({searchQuery:e,isLoading:!1})},500),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.initialFetch()}},{key:"render",value:function(){var e=this,t=this.props.instructors;if(""!==this.state.searchQuery){var n=this.state.searchQuery.toUpperCase();t=this.props.instructors.filter(function(e){return e.first_name.toUpperCase().includes(n)||e.last_name.toUpperCase().includes(n)||e.instrument_1.toUpperCase().includes(n)||e.instrument_2.toUpperCase().includes(n)||e.instrument_3.toUpperCase().includes(n)})}return r.a.createElement("div",null,r.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_.a,{name:"microphone"}),r.a.createElement(b.a.Content,null,"Instructors"),r.a.createElement(S.a,{onClick:function(){return e.setState({newForm:!e.state.newForm})}},this.state.newForm?"Return to Instructors List":"Add Instructor")),this.state.newForm?null:r.a.createElement(Q.a,{open:!1,loading:this.state.isLoading,size:"small",style:{marginLeft:"10px"},placeholder:"Name or Instrument",onSearchChange:function(t){e.setState({isLoading:!0}),e.setSearchQuery(t.target.value)}}),this.state.newForm?r.a.createElement(se,null):r.a.createElement(j.a,{celled:!0},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Name"),r.a.createElement(j.a.HeaderCell,null,"Schools"),r.a.createElement(j.a.HeaderCell,null,"Active"),r.a.createElement(j.a.HeaderCell,null,"Instruments"),r.a.createElement(j.a.HeaderCell,null,"Phone Number"),r.a.createElement(j.a.HeaderCell,null,"Emergancy Number"),r.a.createElement(j.a.HeaderCell,null,"Email"),r.a.createElement(j.a.HeaderCell,null,"Date of Birth"))),r.a.createElement(j.a.Body,null,t.map(function(e){return r.a.createElement(j.a.Row,{key:e.id},r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/instructors/".concat(e.id)},e.first_name," ",e.last_name)),r.a.createElement(j.a.Cell,null,e.schools.map(function(e){return r.a.createElement("div",{key:e.id},e.name,r.a.createElement("br",null))})),r.a.createElement(j.a.Cell,null,e.active?"Active":"Inactive"),r.a.createElement(j.a.Cell,null,e.instrument_1,r.a.createElement("br",null),e.instrument_2?e.instrument_2:null,r.a.createElement("br",null),e.instrument_3?e.instrument_3:null),r.a.createElement(j.a.Cell,null,e.phone_number),r.a.createElement(j.a.Cell,null,e.emergency_number),r.a.createElement(j.a.Cell,null,e.email),r.a.createElement(j.a.Cell,null,e.date_of_birth))}))))}}]),t}(r.a.Component),ie={initialFetch:function(){return function(e){fetch("".concat(O,"/instructors"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e({type:"AUTHORIZATION_FAIL"}):e(X(t))})}}},oe=Object(p.b)(function(e){return{instructors:e.instructors}},ie)(ce);var ue=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={submitted:!1,school_id:null,day:null},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(this.state.school_id)if(this.state.day){var n={instructor_id:this.props.instructor.id,start_time:e.start_time.value,end_time:e.end_time.value,active:!0,day:this.state.day,school_id:this.state.school_id};fetch("".concat(O,"/class_times"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(t.props.dispatch(function(e){return{type:"ADD_DESIRED_CLASSTIME",class_time:e}}(e)),t.setState({submitted:!0}),t.intervalID=setInterval(function(){return t.setState({submitted:!1})},3e3))})}else alert("Please select a day");else alert("Please select a school")}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.currentUser.schools.map(function(e){return{key:e.id,value:e.id,text:e.name}}),n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=n.map(function(e){return{key:n.indexOf(e),value:e,text:e}});return r.a.createElement("div",null,r.a.createElement(y.a,null),r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Select,{id:"school",required:!0,options:t,value:this.state.school_id,label:"Schools",onChange:function(t,n){e.setState({school_id:n.value})}}),r.a.createElement(g.a.Select,{id:"day",required:!0,options:a,value:this.state.day,label:"Day",onChange:function(t,n){e.setState({day:n.value})}}),r.a.createElement(g.a.Input,{id:"start_time",required:!0,type:"time",fluid:!0,label:"Start Time"}),r.a.createElement(g.a.Input,{id:"end_time",required:!0,type:"time",fluid:!0,label:"End Time"})),r.a.createElement(S.a,{type:"submit"},"Add Class Time"),this.state.submitted?r.a.createElement(F.a,{success:!0,header:"Class time has been added"}):null),r.a.createElement(y.a,null))}}]),t}(r.a.Component),me=Object(p.b)(function(e){return{currentUser:e.currentUser,instructor:e.desiredInstructor}})(ue),de=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={active:!0,classForm:!1},n.handleActive=function(e){var t=n.props.class_times.find(function(t){return t.id===e});t&&(t.active&&0!==t.lessons.length&&t.lessons.some(function(e){return e.active})?window.confirm("Are you sure you want to set this class to Inactive? There is at least 1 lesson in the class. If this time is set to inative, all lessons in this time will be set to inactive.")&&n.props.runFetch(t):n.props.runFetch(t))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.initialFetch(this.props.instructor_id)}},{key:"render",value:function(){var e=this,t=[];return t=this.state.active?this.props.class_times.filter(function(e){return e.active}):this.props.class_times.filter(function(e){return!e.active}),r.a.createElement("div",null,r.a.createElement(y.a,null),r.a.createElement(b.a,{as:"h2",textAlign:"center"},r.a.createElement(b.a.Content,null,"Schedule"),r.a.createElement("br",null),r.a.createElement(S.a,{onClick:function(){return e.setState({active:!e.state.active})}},"Show ",this.state.active?"Inactive":"Active"," Class Times"),r.a.createElement(S.a,{onClick:function(){return e.setState({classForm:!e.state.classForm})}},this.state.classForm?"Hide Form":"Add a Class Time")),this.state.classForm?r.a.createElement(me,null):null,r.a.createElement(j.a,{celled:!0},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Time"),r.a.createElement(j.a.HeaderCell,null,"Students"),r.a.createElement(j.a.HeaderCell,null,"Primary Contact"),r.a.createElement(j.a.HeaderCell,null,"Notes"))),r.a.createElement(j.a.Body,null,t.map(function(t){var n=t.start_time,a=t.end_time,l=n.split("T")[1],s="".concat(l.split(":")[0],":").concat(l.split(":")[1]),c=a.split("T")[1],i="".concat(c.split(":")[0],":").concat(c.split(":")[1]),o=t.students.filter(function(e){return t.lessons.find(function(t){return t.student_id===e.id}).active}),u=t.contacts.filter(function(e){var n=t.students.find(function(t){return t.family_id===e.family_id});return t.lessons.find(function(e){return e.student_id===n.id}).active}),m=t.lessons.filter(function(e){return e.active});return r.a.createElement(j.a.Row,{key:t.id},r.a.createElement(j.a.Cell,null,t.day," | ",t.school.name," | ",s,"-",i," ",r.a.createElement(S.a,{onClick:function(){return e.handleActive(t.id)}},"Set to ",t.active?"Inactive":"Active")),r.a.createElement(j.a.Cell,null,o.map(function(e){var n=t.lessons.find(function(t){return t.student_id===e.id}),a=e.first_name,l=e.last_name;return r.a.createElement("div",{key:e.id},r.a.createElement(d.b,{to:"/students/".concat(e.id)},a," ",l)," | ",r.a.createElement(d.b,{to:"/lessons/".concat(n.id)},"Lesson Details"),t.students[t.students.length-1].id===e.id?r.a.createElement("br",null):r.a.createElement(y.a,null))})),r.a.createElement(j.a.Cell,null,u.map(function(e){var n=e.first_name,a=e.last_name,l=e.phone_number,s=e.email;return r.a.createElement(d.b,{to:"/contacts/".concat(e.id),key:e.id},n," ",a,r.a.createElement("br",null),l,"\xdf",r.a.createElement("br",null),s,r.a.createElement("br",null),t.contacts[t.contacts.length-1].id===e.id?r.a.createElement("br",null):r.a.createElement(y.a,null))})),r.a.createElement(j.a.Cell,null,m.map(function(e){return r.a.createElement("div",{key:e.id},e.instructor_notes,t.lessons[t.lessons.length-1].id===e.id?r.a.createElement("br",null):r.a.createElement(y.a,null))})))}))),r.a.createElement(y.a,null))}}]),t}(r.a.Component),he={initialFetch:function(e){return function(t){fetch("".concat(O,"/class_times/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){e.error?t({type:"AUTHORIZATION_FAIL"}):t(function(e){return{type:"FETCH_DESIRED_CLASSTIMES",class_times:e}}(e))})}},runFetch:function(e){return function(t){fetch("".concat(O,"/class_times/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({active:!e.active})}).then(function(e){return e.json()}).then(function(e){e.error?t({type:"AUTHORIZATION_FAIL"}):t(function(e){return{type:"UPDATE_DESIRED_CLASSTIME",class_time:e}}(e))})}}},pe=Object(p.b)(function(e){return{class_times:e.desiredClassTimes,instructor_id:e.desiredInstructor.id}},he)(de),fe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={old_instructor:{},success:!1,schedule:!1},n.runFetch=function(){fetch("".concat(O,"/instructors/").concat(n.props.instructor.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n.props.instructor)}).then(function(e){return e.json()}).then(function(e){n.setState({success:!0,old_instructor:e}),n.intervalID=setInterval(function(){n.setState({success:!1})},1e3)})},n.handleChange=function(e,t){return n.props.dispatch(function(e,t){return{type:"INSTRUCTOR_ONCHANGE",key:e,value:t}}(e,t))},n.handleSubmit=function(e){n.state.old_instructor.active&&!n.props.instructor.active?window.confirm("Are you sure you want to set this Instructor to Inactive? All class times and lessons associated with this instructor will be set to inactive.")&&n.runFetch():n.runFetch()},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.instructor,n=t.first_name,a=t.last_name,l=t.instrument_1,s=t.instrument_2,c=t.instrument_3,i=t.phone_number,o=t.emergency_number,u=t.email,m=t.date_of_birth,h=t.billing_address,p=t.pay_rate,f=t.active,E=t.biography,v=t.misc_notes,C=t.schools,I=[];return this.props.currentUser.authorized&&(I=this.props.currentUser.schools.map(function(e){return{key:e.id,value:e.id,text:e.name}})),r.a.createElement("div",null,r.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_.a,{name:"microphone"}),r.a.createElement(b.a.Content,null,this.state.old_instructor.first_name," ",this.state.old_instructor.last_name),r.a.createElement(d.b,{to:"/instructors"},r.a.createElement(S.a,null,"Go to Instructors")),r.a.createElement(S.a,{onClick:function(){return e.setState({schedule:!e.state.schedule})}},this.state.schedule?"Hide":"Show"," Schedule")),this.state.schedule?r.a.createElement(pe,null):r.a.createElement(y.a,null),r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"First name",value:n,onChange:function(t){return e.handleChange("first_name",t.target.value)}}),r.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"Last name",value:a,onChange:function(t){return e.handleChange("last_name",t.target.value)}}),r.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"Date of birth",type:"date",value:m,onChange:function(t){return e.handleChange("date_of_birth",t.target.value)}})),r.a.createElement(g.a.Input,{fluid:!0,label:"Billing Address",value:h,onChange:function(t){return e.handleChange("billing_address",t.target.value)}}),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Dropdown,{required:!0,multiple:!0,selection:!0,options:I,value:C.map(function(e){return e.id}),label:"Schools",onChange:function(t,n){var a=e.props.currentUser.schools.filter(function(e){return n.value.includes(e.id)});e.handleChange("schools",a)}}),r.a.createElement(g.a.Input,{fluid:!0,label:"Pay Rate",type:"number",value:p,onChange:function(t){return e.handleChange("pay_rate",t.target.value)}}),r.a.createElement(g.a.Dropdown,{required:!0,selection:!0,options:[{key:1,value:!0,text:"Active"},{key:2,value:!1,text:"Inactive"}],value:f,label:"Status",onChange:function(t,n){e.handleChange("active",n.value)}})),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"Phone Number",type:"text",value:i,onChange:function(t){return e.handleChange("phone_number",t.target.value)}}),r.a.createElement(g.a.Input,{fluid:!0,label:"Emergency Number",type:"tel",value:o,onChange:function(t){return e.handleChange("emergency_number",t.target.value)}}),r.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"Email",type:"email",value:u,onChange:function(t){return e.handleChange("email",t.target.value)}})),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"Instrument 1",value:l,onChange:function(t){return e.handleChange("instrument_1",t.target.value)}}),r.a.createElement(g.a.Input,{fluid:!0,label:"Instrument 2",value:s,onChange:function(t){return e.handleChange("instrument_2",t.target.value)}}),r.a.createElement(g.a.Input,{fluid:!0,label:"Instrument 3",value:c,onChange:function(t){return e.handleChange("instrument_3",t.target.value)}})),r.a.createElement(g.a.TextArea,{label:"Biography",value:E,onChange:function(t){return e.handleChange("biography",t.target.value)}}),r.a.createElement(g.a.TextArea,{label:"Miscellaneous Notes",value:v,onChange:function(t){return e.handleChange("misc_notes",t.target.value)}}),r.a.createElement(S.a,{type:"submit"},"Save Changes"),r.a.createElement(S.a,{onClick:function(){return e.props.dispatch(K(e.state.old_instructor))}},"Revert Changes"),this.state.success?r.a.createElement(F.a,{success:!0,header:"Changes have been saved"}):null))}},{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/").pop();fetch("".concat(O,"/instructors/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({old_instructor:t}),t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(K(t))})}}]),t}(r.a.Component),Ee=Object(p.b)(function(e){return{instructor:e.desiredInstructor,currentUser:e.currentUser}})(fe);function be(e){return{type:"FETCH_DESIRED_FAMILY",family:e}}function _e(e,t){return{type:"FAMILY_ONCHANGE",key:e,value:t}}var ye=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={submitted:!1,family_id:"",school_id:null},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(this.state.school_id){var n={family_name:e.family_name.value,school_id:this.state.school_id,misc_notes:"",billing_total:0};fetch("".concat(O,"/families"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):t.setState({submitted:!0,family_id:e.id})})}else alert("Please select a school")}},{key:"render",value:function(){var e=this,t=this.props.currentUser.schools.map(function(e){return{key:e.id,value:e.id,text:e.name}});return r.a.createElement("div",null,this.state.submitted?r.a.createElement(h.a,{to:"/families/".concat(this.state.family_id)}):null,r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Select,{id:"schools",required:!0,options:t,value:this.state.school_id,label:"Schools",onChange:function(t,n){return e.setState({school_id:n.value})}}),r.a.createElement(g.a.Input,{id:"family_name",required:!0,fluid:!0,label:"Family Name"})),r.a.createElement(S.a,{type:"submit"},"Add Family")))}}]),t}(r.a.Component),ve=Object(p.b)(function(e){return{currentUser:e.currentUser}})(ye),ge=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={newForm:!1,searchQuery:"",isLoading:!1},n.setSearchQuery=W()(function(e){n.setState({searchQuery:e,isLoading:!1})},500),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.families;if(""!==this.state.searchQuery){var n=this.state.searchQuery.toUpperCase();t=this.props.families.filter(function(e){return e.family_name.toUpperCase().includes(n)})}return r.a.createElement("div",null,r.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_.a,{name:"group"}),r.a.createElement(b.a.Content,null,"Families"),r.a.createElement(S.a,{onClick:function(){return e.setState({newForm:!e.state.newForm})}},this.state.newForm?"Hide Family Form":"Add a Family")),this.state.newForm?r.a.createElement(ve,null):null,r.a.createElement(Q.a,{open:!1,loading:this.state.isLoading,size:"small",style:{marginLeft:"10px"},placeholder:"Family Name",onSearchChange:function(t){e.setState({isLoading:!0}),e.setSearchQuery(t.target.value)}}),r.a.createElement(j.a,{celled:!0},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Family Name"),r.a.createElement(j.a.HeaderCell,null,"Contacts"),r.a.createElement(j.a.HeaderCell,null,"Students"),r.a.createElement(j.a.HeaderCell,null,"School"),r.a.createElement(j.a.HeaderCell,null,"Billing Total"))),r.a.createElement(j.a.Body,null,t.map(function(e){return r.a.createElement(j.a.Row,{key:e.id},r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/families/".concat(e.id)},e.family_name)),r.a.createElement(j.a.Cell,null,e.contacts.map(function(t){return r.a.createElement(d.b,{to:"/contacts/".concat(t.id),key:t.id},e.contacts[e.contacts.length-1].id===t.id?"".concat(t.first_name," ").concat(t.last_name):"".concat(t.first_name," ").concat(t.last_name,", "))})),r.a.createElement(j.a.Cell,null,e.students.map(function(t){return r.a.createElement(d.b,{to:"/students/".concat(t.id),key:t.id},e.students[e.students.length-1].id===t.id?"".concat(t.first_name," ").concat(t.last_name):"".concat(t.first_name," ").concat(t.last_name,", "))})),r.a.createElement(j.a.Cell,null,e.school.name),r.a.createElement(j.a.Cell,null,e.billing_total))}))))}},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(O,"/families"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return 200===e.status?e.json():console.log("error")}).then(function(t){t?t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(function(e){return{type:"FETCH_FAMILIES",families:e}}(t)):alert("There was an error retrieving the date. If this persists, please contact customer support")})}}]),t}(r.a.Component),Ce=Object(p.b)(function(e){return{families:e.families}})(ge),Se=n(48),Ie=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={submitted:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this,n={family_id:this.props.family.id,school_id:this.props.family.school_id};["first_name","last_name","relation_to_students","billing_address","phone_number","emergency_number","email"].forEach(function(t){return n[t]=e[t].value}),fetch("".concat(O,"/contacts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(t.props.dispatch(_e("contacts",[].concat(Object(Se.a)(t.props.family.contacts),[e]))),t.setState({submitted:!0}),t.intervalID=setInterval(function(){t.setState({submitted:!1})},3e3))})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.a,null),r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{id:"first_name",required:!0,fluid:!0,label:"First Name"}),r.a.createElement(g.a.Input,{id:"last_name",required:!0,fluid:!0,label:"Last Name"}),r.a.createElement(g.a.Input,{id:"relation_to_students",required:!0,fluid:!0,label:"Relation to Students"})),r.a.createElement(g.a.Input,{id:"billing_address",fluid:!0,label:"Billing Address"}),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{id:"phone_number",required:!0,fluid:!0,label:"Phone Number"}),r.a.createElement(g.a.Input,{id:"emergency_number",fluid:!0,label:"Emergency Number"}),r.a.createElement(g.a.Input,{id:"email",required:!0,fluid:!0,label:"Email"})),r.a.createElement(S.a,{type:"submit"},"Add Contact"),this.state.submitted?r.a.createElement(F.a,{success:!0,header:"Contact has been added"}):null),r.a.createElement(y.a,null))}}]),t}(r.a.Component),Oe=Object(p.b)(function(e){return{currentUser:e.currentUser,family:e.desiredFamily}})(Ie),Ae=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={submitted:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this,n={family_id:this.props.family.id,school_id:this.props.family.school_id};["first_name","last_name","date_of_birth","phone_number","misc_notes","medical_notes","billing_notes"].forEach(function(t){return n[t]=e[t].value}),fetch("".concat(O,"/students"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(t.props.dispatch(_e("students",[].concat(Object(Se.a)(t.props.family.students),[e]))),t.setState({submitted:!0}),t.intervalID=setInterval(function(){t.setState({submitted:!1})},2e3))})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.a,null),r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{id:"first_name",required:!0,fluid:!0,label:"First Name"}),r.a.createElement(g.a.Input,{id:"last_name",required:!0,fluid:!0,label:"Last Name"}),r.a.createElement(g.a.Input,{id:"date_of_birth",type:"date",required:!0,fluid:!0,label:"Date of Birth"}),r.a.createElement(g.a.Input,{id:"phone_number",fluid:!0,label:"Phone Number"})),r.a.createElement(g.a.TextArea,{id:"billing_notes",label:"Billing Notes"}),r.a.createElement(g.a.TextArea,{id:"medical_notes",label:"Medical Notes"}),r.a.createElement(g.a.TextArea,{id:"misc_notes",label:"Miscellaneous Notes"}),r.a.createElement(S.a,{type:"submit"},"Add Student"),this.state.success?r.a.createElement(F.a,{success:!0,header:"Student has been added"}):null),r.a.createElement(y.a,null))}}]),t}(r.a.Component),Te=Object(p.b)(function(e){return{currentUser:e.currentUser,family:e.desiredFamily}})(Ae),ke=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={old_family:{},success:!1,studentForm:!1,contactForm:!1},n.handleChange=function(e,t){return n.props.dispatch(_e(e,t))},n.handleSubmit=function(){fetch("".concat(O,"/families/").concat(n.props.family.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n.props.family)}).then(function(e){return e.json()}).then(function(e){n.setState({success:!0,old_family:e}),n.intervalID=setInterval(function(){n.setState({success:!1})},1e3)})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.family,n=t.family_name,a=t.students,l=t.contacts,s=t.misc_notes,c=t.lessons,i=t.class_times,o=t.instructors;return r.a.createElement("div",null,r.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_.a,{name:"group"}),r.a.createElement(b.a.Content,null,this.state.old_family.family_name),r.a.createElement(b.a.Subheader,null,this.props.family.school.name),r.a.createElement(d.b,{to:"/families"},r.a.createElement(S.a,null,"Go to Families"))),r.a.createElement(y.a,null),r.a.createElement(b.a,{as:"h2",textAlign:"center"},r.a.createElement(b.a.Content,null,"Contacts"),r.a.createElement(S.a,{onClick:function(){return e.setState({contactForm:!e.state.contactForm})}},this.state.contactForm?"View Current Contacts":"Add Contact")),this.state.contactForm?r.a.createElement(Oe,null):r.a.createElement(j.a,{celled:!0},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Name"),r.a.createElement(j.a.HeaderCell,null,"Relation to Students"),r.a.createElement(j.a.HeaderCell,null,"Phone Number"),r.a.createElement(j.a.HeaderCell,null,"Email"))),r.a.createElement(j.a.Body,null,l.map(function(e){return r.a.createElement(j.a.Row,{key:e.id},r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/contacts/".concat(e.id)},e.first_name," ",e.last_name)),r.a.createElement(j.a.Cell,null,e.relation_to_students),r.a.createElement(j.a.Cell,null,e.phone_number),r.a.createElement(j.a.Cell,null,e.email))}))),r.a.createElement(b.a,{as:"h2",textAlign:"center"},r.a.createElement(b.a.Content,null,"Students"),r.a.createElement(S.a,{onClick:function(){return e.setState({studentForm:!e.state.studentForm})}},this.state.studentForm?"View Current Students":"Add Student")),this.state.studentForm?r.a.createElement(Te,null):r.a.createElement(j.a,{celled:!0},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Name"),r.a.createElement(j.a.HeaderCell,null,"Date of Birth"),r.a.createElement(j.a.HeaderCell,null,"Lessons"))),r.a.createElement(j.a.Body,null,a.map(function(e){return r.a.createElement(j.a.Row,{key:e.id},r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/students/".concat(e.id)},e.first_name," ",e.last_name)),r.a.createElement(j.a.Cell,null,e.date_of_birth),r.a.createElement(j.a.Cell,null,c.filter(function(t){return t.student_id===e.id&&t.active}).map(function(e){var t=i.find(function(t){return t.id===e.class_time_id}),n=t.day,a=t.start_time,l=t.end_time,s=t.instructor_id,c=a.split("T")[1],u="".concat(c.split(":")[0],":").concat(c.split(":")[1]),m=l.split("T")[1],h="".concat(m.split(":")[0],":").concat(m.split(":")[1]),p=o.find(function(e){return e.id===s});return r.a.createElement("div",{key:e.id},r.a.createElement(d.b,{to:"/lessons/".concat(e.id)},n," ",u,"-",h)," | ",e.instrument," | ",r.a.createElement(d.b,{to:"/instructors/".concat(p.id)},p.first_name," ",p.last_name),r.a.createElement("br",null))})))}))),r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(){return e.handleSubmit}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{fluid:!0,label:"Family Name",value:n,onChange:function(t){return e.handleChange("family_name",t.target.value)}})),r.a.createElement(g.a.Group,{widths:"equal"}),r.a.createElement(g.a.TextArea,{label:"Miscellaneous Notes",value:s,onChange:function(t){return e.handleChange("misc_notes",t.target.value)}}),r.a.createElement(S.a,{type:"submit",onClick:this.handleSubmit},"Save Changes"),r.a.createElement(S.a,{onClick:function(){return e.props.dispatch(be(e.state.old_family))}},"Revert Changes"),this.state.success?r.a.createElement(F.a,{success:!0,header:"Changes have been saved"}):null))}},{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/").pop();fetch("".concat(O,"/families/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({old_family:t}),t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(be(t))})}}]),t}(r.a.Component),je=Object(p.b)(function(e){return{family:e.desiredFamily}})(ke);function we(e){return{type:"FETCH_DESIRED_CONTACT",contact:e}}var He=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={searchQuery:"",isLoading:!1},n.setSearchQuery=W()(function(e){n.setState({searchQuery:e,isLoading:!1})},500),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.contacts.sort(function(e,t){return e.last_name>t.last_name?1:e.last_name<t.last_name?-1:0});if(""!==this.state.searchQuery){var n=this.state.searchQuery.toUpperCase();t=t.filter(function(e){return e.first_name.toUpperCase().includes(n)||e.last_name.toUpperCase().includes(n)||e.phone_number.toUpperCase().includes(n)||e.email.toUpperCase().includes(n)||e.family.family_name.toUpperCase().includes(n)})}return r.a.createElement("div",null,r.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_.a,{name:"phone"}),r.a.createElement(b.a.Content,null,"Contacts")),r.a.createElement(Q.a,{open:!1,loading:this.state.isLoading,size:"small",style:{marginLeft:"10px"},placeholder:"Name, Number, or Email",onSearchChange:function(t){e.setState({isLoading:!0}),e.setSearchQuery(t.target.value)}}),r.a.createElement(j.a,{celled:!0},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Name"),r.a.createElement(j.a.HeaderCell,null,"Family Name"),r.a.createElement(j.a.HeaderCell,null,"Relation To Students"),r.a.createElement(j.a.HeaderCell,null,"Phone Number"),r.a.createElement(j.a.HeaderCell,null,"Email"),r.a.createElement(j.a.HeaderCell,null,"School"))),r.a.createElement(j.a.Body,null,t.map(function(e){return r.a.createElement(j.a.Row,{key:e.id},r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/contacts/".concat(e.id)},e.first_name," ",e.last_name)),r.a.createElement(j.a.Cell,null,r.a.createElement(d.b,{to:"/families/".concat(e.family.id)},e.family.family_name)),r.a.createElement(j.a.Cell,null,e.relation_to_students),r.a.createElement(j.a.Cell,null,e.phone_number),r.a.createElement(j.a.Cell,null,e.email),r.a.createElement(j.a.Cell,null,e.school.name))}))))}},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(O,"/contacts"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(function(e){return{type:"FETCH_CONTACTS",contacts:e}}(t))})}}]),t}(r.a.Component),Ne=Object(p.b)(function(e){return{contacts:e.contacts}})(He),Fe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={old_contact:{},success:!1},n.handleChange=function(e,t){return n.props.dispatch(function(e,t){return{type:"CONTACT_ONCHANGE",key:e,value:t}}(e,t))},n.handleSubmit=function(){fetch("".concat(O,"/contacts/").concat(n.props.contact.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n.props.contact)}).then(function(e){return e.json()}).then(function(e){n.setState({success:!0,old_contact:e}),n.intervalID=setInterval(function(){n.setState({success:!1})},1e3)})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.contact,n=t.first_name,a=t.last_name,l=t.relation_to_students,s=t.phone_number,c=t.emergency_number,i=t.email,o=t.billing_address,u=t.family_id;return r.a.createElement("div",null,r.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_.a,{name:"phone"}),r.a.createElement(b.a.Content,null,this.state.old_contact.first_name," ",this.state.old_contact.last_name),r.a.createElement(d.b,{to:"/families/".concat(u)},r.a.createElement(S.a,null,"Go to Family Page"))),r.a.createElement(y.a,null),r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(){return e.handleSubmit}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{fluid:!0,label:"First name",value:n,onChange:function(t){return e.handleChange("first_name",t.target.value)}}),r.a.createElement(g.a.Input,{fluid:!0,label:"Last name",value:a,onChange:function(t){return e.handleChange("last_name",t.target.value)}}),r.a.createElement(g.a.Input,{fluid:!0,label:"Relation to Students",value:l,onChange:function(t){return e.handleChange("relation_to_students",t.target.value)}})),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{fluid:!0,label:"Billing Address",value:o,onChange:function(t){return e.handleChange("billing_address",t.target.value)}})),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{fluid:!0,label:"Phone Number",type:"text",value:s,onChange:function(t){return e.handleChange("phone_number",t.target.value)}}),r.a.createElement(g.a.Input,{fluid:!0,label:"Emergency Number",type:"tel",value:c,onChange:function(t){return e.handleChange("emergency_number",t.target.value)}}),r.a.createElement(g.a.Input,{fluid:!0,label:"Email",type:"email",value:i,onChange:function(t){return e.handleChange("email",t.target.value)}})),r.a.createElement(S.a,{type:"submit",onClick:this.handleSubmit},"Save Changes"),r.a.createElement(S.a,{onClick:function(){return e.props.dispatch(we(e.state.old_contact))}},"Revert Changes"),this.state.success?r.a.createElement(F.a,{success:!0,header:"Changes have been saved"}):null))}},{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/").pop();fetch("".concat(O,"/contacts/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({old_contact:t}),t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(we(t))})}}]),t}(r.a.Component),De=Object(p.b)(function(e){return{contact:e.desiredContact}})(Fe),Ue=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={old_lesson:{},attendanceForm:!1,editAttendance:null},n.handleChange=function(e,t){return n.props.dispatch(function(e,t){return{type:"UPDATE_DESIRED_LESSON",key:e,value:t}}(e,t))},n.handleSubmit=function(){fetch("".concat(O,"/lessons/").concat(n.props.lesson.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n.props.lesson)}).then(function(e){return e.json()}).then(function(e){n.setState({success:!0,old_lesson:e}),n.intervalID=setInterval(function(){n.setState({success:!1})},1e3)})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleAttendanceSubmit",value:function(e,t){var n=this,a={make_up:parseInt(e.make_up.value)};["date","status","cancelled_date"].forEach(function(t){return a[t]=e[t].value}),fetch("".concat(O,"/attendances/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){e.error?n.props.dispatch({type:"AUTHORIZATION_FAIL"}):(n.props.dispatch(N(e)),n.props.dispatch(H(e)),n.setState({editAttendance:null}))})}},{key:"render",value:function(){var e=this,t=this.props.lesson,n=t.active,a=t.class_time,l=t.instructor,s=t.student,c=t.school,i=t.instructor_notes,o=t.instrument,u=t.misc_notes,m=t.attendances,h=a.day,p=a.start_time,f=a.end_time;return r.a.createElement("div",null,r.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_.a,{name:"book"}),r.a.createElement(b.a.Content,null,n?null:"(Inactive)"," ",h," | ",p,"-",f," | ",o),r.a.createElement(b.a.Subheader,null,l.first_name," ",l.last_name," teaching ",s.first_name," ",s.last_name," at ",c.name),r.a.createElement(d.b,{to:"/instructors/".concat(l.id)},r.a.createElement(S.a,null,"Go to Instructor")),r.a.createElement(d.b,{to:"/students/".concat(s.id)},r.a.createElement(S.a,null,"Go to Student"))),r.a.createElement(y.a,null),r.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(){return e.handleSubmit}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Dropdown,{required:!0,selection:!0,options:[{key:1,value:!0,text:"Active"},{key:2,value:!1,text:"Inactive"}],value:n,label:"Active",onChange:function(t,n){e.handleChange("active",n.value)}}),r.a.createElement(g.a.Input,{fluid:!0,required:!0,label:"Instrument",value:o,onChange:function(t){return e.handleChange("instrument",t.target.value)}})),r.a.createElement(g.a.TextArea,{label:"Instructor Notes",value:i,onChange:function(t){return e.handleChange("instructor_notes",t.target.value)}}),r.a.createElement(g.a.TextArea,{label:"Miscellaneous Notes",value:u,onChange:function(t){return e.handleChange("misc_notes",t.target.value)}}),r.a.createElement(S.a,{type:"submit",onClick:this.handleSubmit},"Save Changes"),r.a.createElement(S.a,{onClick:function(){return e.props.dispatch(N(e.state.old_lesson))}},"Revert Changes"),this.state.success?r.a.createElement(F.a,{success:!0,header:"Changes have been saved"}):null),r.a.createElement(y.a,null),r.a.createElement(b.a,{as:"h2"},r.a.createElement(b.a.Content,null,"Attendance"),r.a.createElement("br",null),r.a.createElement(S.a,{onClick:function(){return e.setState({attendanceForm:!e.state.attendanceForm})}},this.state.attendanceForm?"Hide Form":"Add a Attendance")),this.state.attendanceForm?r.a.createElement(U,null):null,r.a.createElement(j.a,{celled:!0},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Date"),r.a.createElement(j.a.HeaderCell,null,"Status"),r.a.createElement(j.a.HeaderCell,null,"Make-Up"),r.a.createElement(j.a.HeaderCell,null,"Cancelled Date"))),r.a.createElement(j.a.Body,null,m.map(function(t){return e.state.editAttendance===t.id?r.a.createElement(j.a.Row,{key:t.id},r.a.createElement(j.a.Cell,null,r.a.createElement(g.a,{key:t.id,style:{margin:"10px"},onSubmit:function(n){return e.handleAttendanceSubmit(n.target,t.id)}},r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Input,{id:"date",type:"date",defaultValue:t.date,required:!0,fluid:!0,label:"Date"}),r.a.createElement(g.a.Input,{id:"status",defaultValue:t.status,required:!0,fluid:!0,label:"Status"}),r.a.createElement(g.a.Input,{id:"make_up",defaultValue:t.make_up?1:0,type:"number",fluid:!0,label:"Make-up Lesson"}),r.a.createElement(g.a.Input,{id:"cancelled_date",type:"date",defaultValue:t.cancelled_date,fluid:!0,label:"Cancelled Date"}),r.a.createElement(S.a,{type:"submit"},"Confirm Attendance"))))):r.a.createElement(j.a.Row,{key:t.id},r.a.createElement(j.a.Cell,null,t.date,e.state.editAttendance===t.id?r.a.createElement(S.a,{onClick:function(){return e.setState({editAttendance:null})}},"Hide Form"):r.a.createElement(S.a,{onClick:function(){return e.setState({editAttendance:t.id})}},"Edit Attendance")),r.a.createElement(j.a.Cell,null,t.status),r.a.createElement(j.a.Cell,null,t.make_up?"Yes":"No"),r.a.createElement(j.a.Cell,null,t.cancelled_date))}))))}},{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/").pop();fetch("".concat(O,"/lessons/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(N(t)),e.setState({old_lesson:t})})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(N({class_time:{start_time:""},student:{},instructor:{},attendances:[],school:{},instrument:"",instructor_notes:"",misc_notes:""})),clearInterval(this.intervalID)}}]),t}(r.a.Component),Le=Object(p.b)(function(e){return{lesson:e.desiredLesson}})(Ue);var Re=function(){return r.a.createElement(b.a,{icon:!0,as:"h2",textAlign:"center"},r.a.createElement(_.a,{name:"bug",circular:!0}),r.a.createElement(b.a.Content,null,"Uh oh...404"),r.a.createElement(b.a.Subheader,null,"This webpage does not exit. You may have the wrong url."))},xe=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(P,null),r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",render:function(){return r.a.createElement(M,null)}}),r.a.createElement(h.b,{exact:!0,path:"/students",render:function(){return r.a.createElement(Y,null)}}),r.a.createElement(h.b,{strict:!0,path:"/students/",render:function(){return r.a.createElement(re,null)}}),r.a.createElement(h.b,{exact:!0,path:"/instructors",render:function(){return r.a.createElement(oe,null)}}),r.a.createElement(h.b,{strict:!0,path:"/instructors/",render:function(){return r.a.createElement(Ee,null)}}),r.a.createElement(h.b,{exact:!0,path:"/families",render:function(){return r.a.createElement(Ce,null)}}),r.a.createElement(h.b,{strict:!0,path:"/families/",render:function(){return r.a.createElement(je,null)}}),r.a.createElement(h.b,{exact:!0,path:"/contacts",render:function(){return r.a.createElement(Ne,null)}}),r.a.createElement(h.b,{strict:!0,path:"/contacts/",render:function(){return r.a.createElement(De,null)}}),r.a.createElement(h.b,{strict:!0,path:"/lessons/",render:function(){return r.a.createElement(Le,null)}}),r.a.createElement(h.b,{component:function(){return r.a.createElement(Re,null)}})))}},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(O,"/authorize"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({initial:!0})}).then(function(e){return e.json()}).then(function(t){t.error&&"Authorization Error"===t.message?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(f(t))})}}]),t}(r.a.Component),qe=Object(p.b)(function(e){return{authorized:e.currentUser.authorized}})(xe),Me=n(49),Ge=n(34),ze=Object(Me.c)({students:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STUDENTS":return t.students;default:return e}},instructors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_INSTRUCTORS":return t.instructors;default:return e}},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authorized:!0,schools:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHORIZATION_SUCCESS":return Object(E.a)({authorized:!0},t.currentUser);case"AUTHORIZATION_FAIL":return{authorized:!1};default:return e}},lessons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{id:1,class_time:{},instructor:{},school:{}}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_LESSONS":return t.lessons.map(function(e){var t=e.class_time.start_time.split("T")[1],n="".concat(t.split(":")[0],":").concat(t.split(":")[1]),a=e.class_time.end_time.split("T")[1],r="".concat(a.split(":")[0],":").concat(a.split(":")[1]);return Object(E.a)({},e,{class_time:Object(E.a)({},e.class_time,{start_time:n,end_time:r})})}).sort(function(e,t){return parseInt(e.class_time.start_time.split(":")[0]+e.class_time.start_time.split(":")[1])-parseInt(t.class_time.start_time.split(":")[0]+t.class_time.start_time.split(":")[1])});case"UPDATE_LESSONS":var n=t.lesson.class_time.start_time.split("T")[1],a="".concat(n.split(":")[0],":").concat(n.split(":")[1]),r=t.lesson.class_time.end_time.split("T")[1],l="".concat(r.split(":")[0],":").concat(r.split(":")[1]),s=Object(E.a)({},t.lesson,{class_time:Object(E.a)({},t.lesson.class_time,{start_time:a,end_time:l})});return e.map(function(e){return e.id===t.lesson.id?s:e});case"ADD_DESIRED_LESSON":var c=t.lesson.class_time.start_time.split("T")[1],i="".concat(c.split(":")[0],":").concat(c.split(":")[1]),o=t.lesson.class_time.end_time.split("T")[1],u="".concat(o.split(":")[0],":").concat(o.split(":")[1]);return[].concat(Object(Se.a)(e),[Object(E.a)({},t.lesson,{class_time:Object(E.a)({},t.lesson.class_time,{start_time:i,end_time:u})})]);default:return e}},families:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FAMILIES":return t.families;default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CONTACTS":return t.contacts;default:return e}},desiredInstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{first_name:"",last_name:"",instrument_1:"",instrument_2:"",instrument_3:"",phone_number:"",emergency_number:"",email:"",date_of_birth:"",billing_address:"",pay_rate:"",biography:"",misc_notes:"",class_times:[],schools:[],activeSchedule:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_INSTRUCTOR":return t.instructor;case"INSTRUCTOR_ONCHANGE":return Object(E.a)({},e,Object(Ge.a)({},t.key,t.value));case"SCHEDULE_ONCHANGE":return Object(E.a)({},e,{activeSchedule:t.value});default:return e}},desiredStudent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{first_name:"",last_name:"",phone_number:"",email:"",date_of_birth:"",misc_notes:"",medical_notes:"",billing_notes:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_STUDENT":return t.student;case"STUDENT_ONCHANGE":return Object(E.a)({},e,Object(Ge.a)({},t.key,t.value));default:return e}},desiredFamily:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{family_name:"",contacts:[],students:[],billing_total:"",school:{name:""}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_FAMILY":return t.family;case"FAMILY_ONCHANGE":return Object(E.a)({},e,Object(Ge.a)({},t.key,t.value));default:return e}},desiredContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{first_name:"",last_name:"",relation_to_students:"",phone_number:"",emergency_number:"",email:"",billing_address:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_CONTACT":return t.contact;case"CONTACT_ONCHANGE":return Object(E.a)({},e,Object(Ge.a)({},t.key,t.value));default:return e}},desiredClassTimes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{id:1,school:{},students:[],contacts:[],start_time:" T : ",end_time:" T : ",lessons:[]}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_CLASSTIMES":return t.class_times;case"UPDATE_DESIRED_CLASSTIME":return e.map(function(e){return e.id===t.class_time.id?t.class_time:e});case"ADD_DESIRED_CLASSTIME":return[].concat(Object(Se.a)(e),[t.class_time]);default:return e}},desiredLesson:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{class_time:{start_time:""},student:{},instructor:{},attendances:[],school:{},instrument:"",instructor_notes:"",misc_notes:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_LESSON":if(t.lesson.class_time.start_time.length>5){var n=t.lesson.class_time.start_time.split("T")[1],a="".concat(n.split(":")[0],":").concat(n.split(":")[1]),r=t.lesson.class_time.end_time.split("T")[1],l="".concat(r.split(":")[0],":").concat(r.split(":")[1]);return Object(E.a)({},t.lesson,{class_time:Object(E.a)({},t.lesson.class_time,{start_time:a,end_time:l})})}return t.lesson;case"UPDATE_DESIRED_LESSON":return Object(E.a)({},e,Object(Ge.a)({},t.key,t.value));case"ATTENDANCE_ADDED":return Object(E.a)({},e,{submitted:t.value});case"MAKE_UP_STATUS":return Object(E.a)({},e,{make_up:t.value});default:return e}}}),Be=n(204),Pe=[Object(Me.a)(Be.a)];window.__REDUX_DEVTOOLS_EXTENSION__&&Pe.push(window.__REDUX_DEVTOOLS_EXTENSION__());var Ze=Me.d.apply(void 0,Pe),Qe=Object(Me.e)(ze,Ze);s.a.render(r.a.createElement(p.a,{store:Qe},r.a.createElement(qe,null)),document.getElementById("root"))}},[[217,1,2]]]);
//# sourceMappingURL=main.a1685320.chunk.js.map