(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{217:function(e,t,n){e.exports=n(366)},366:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(42),s=n.n(r),c=n(16),i=n(17),o=n(19),u=n(18),m=n(20),d=n(9),h=n(52),p=n(14);function f(e){return{type:"AUTHORIZATION_SUCCESS",currentUser:e}}var E=n(23),b=n(381),_=n(60),y=n(373),v=n(383),g=n(376),C=n(384),S=n(367),I=n(375),O=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},l.a.createElement(_.a,{name:"music",circular:!0}),l.a.createElement(b.a.Content,null,"Welcome to Easo's Music Lessons Scheduler"),l.a.createElement(b.a.Subheader,null,"A new and personalized application for music schools")),l.a.createElement(y.a,null),l.a.createElement(v.a,{textAlign:"center",verticalAlign:"middle"},l.a.createElement(v.a.Column,{style:{maxWidth:450}},l.a.createElement(b.a,{as:"h2",color:"black",textAlign:"center"},"Log-in to your account"),l.a.createElement(g.a,{size:"large",onSubmit:function(t){return e.props.handleSubmit(t.target.username.value,t.target.password.value)}},l.a.createElement(C.a,null,l.a.createElement(g.a.Input,{id:"username",fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",type:"text"}),l.a.createElement(g.a.Input,{id:"password",fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password"}),l.a.createElement(S.a,{color:"black",fluid:!0,size:"large"},"Login"))))),l.a.createElement(y.a,null),l.a.createElement(I.a,{text:!0},l.a.createElement(b.a,{as:"h2"},"What is Easo's Music Lessons Scheduler?"),l.a.createElement("p",null,"Easo Scheduler is an application developed by Roysan Easo. This application is primarily used to organize students for a music school and keep track of information such as lessons, attendance, and so on. It is also designed to make the enrollment process easier by doing things like automatically sending emails upon enrollment. Because it is in the early development stages, Roysan is able to add or change features to accomodate users upon request.")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(I.a,{text:!0},l.a.createElement(b.a,{as:"h2"},"How much does it cost?"),l.a.createElement("p",null,"Because this application has only recently been created and is only managed by one person, it is currently free!")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(I.a,{text:!0},l.a.createElement(b.a,{as:"h2"},"How can I get started?"),l.a.createElement("p",null,"Simply send an email to easo.roysan@gmail.com and Roysan will keep direct contact with you to answer any questions you may have and set up an account for you.")))}}]),t}(l.a.Component),A={handleSubmit:function(e,t){return function(n){fetch("http://localhost:5000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("token",e.token),"Confirmed"===e.message?n(f(Object(E.a)({},e.current_user,{schools:e.schools}))):(n({type:"AUTHORIZATION_FAIL"}),alert(e.message))})}}},T=Object(p.b)(function(e){return{authorized:e.users}},A)(O),k=n(377);function j(e){return{type:"FETCH_LESSONS",lessons:e}}function w(e){return{type:"UPDATE_LESSONS",lesson:e}}function H(e){return{type:"FETCH_DESIRED_LESSON",lesson:e}}var N=n(378),F=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={submitted:!1,makeUpStatus:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this,n=this.state.makeUpStatus,a={lesson_id:this.props.lesson.id,school_id:this.props.lesson.school_id};["date","status","make_up","cancelled_date"].forEach(function(t){a[t]="make_up"===t?n:"cancelled_date"!==t||n?e[t].value:null}),fetch("http://localhost:5000/attendances",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(t.setState({submitted:!0}),t.props.dispatch(H(e)),t.props.dispatch(w(e)),t.intervalID=setInterval(function(){return t.setState({submitted:!1})},3e3))})}},{key:"componentDidMount",value:function(){H(this.props.lesson)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=new Date,n=function(e){return e<=99?"0".concat(e).slice(-2):e},a="".concat(t.getFullYear(),"-").concat(n(t.getMonth()+1),"-").concat(n(t.getDate()));return l.a.createElement("div",null,l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{id:"date",type:"date",defaultValue:a,required:!0,fluid:!0,label:"Date"}),l.a.createElement(g.a.Input,{id:"status",required:!0,fluid:!0,label:"Status"})),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Dropdown,{selection:!0,options:[{key:1,value:!0,text:"True"},{key:2,value:!1,text:"False"}],value:this.state.makeUpStatus,label:"Make-Up",onChange:function(t,n){e.setState({makeUpStatus:n.value})}}),this.state.makeUpStatus?l.a.createElement(g.a.Input,{required:!0,id:"cancelled_date",type:"date",fluid:!0,label:"Cancelled Date"}):null),l.a.createElement(S.a,{type:"submit"},"Add Attendance"),this.state.submitted?l.a.createElement(N.a,{success:!0,header:"Attendance submitted"}):null))}}]),t}(l.a.Component),D=Object(p.b)(function(e){return{lesson:e.desiredLesson}})(F),U=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.initialFetch()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},l.a.createElement(_.a,{name:"music",circular:!0}),l.a.createElement(b.a.Content,null,"Hello ",this.props.currentUser.first_name),l.a.createElement(b.a.Subheader,null,"Here are today's lessons")),this.props.currentUser.schools.map(function(t){return l.a.createElement("div",{key:t.id},l.a.createElement(y.a,null),l.a.createElement(b.a,{as:"h2"},l.a.createElement(b.a.Content,null,t.name)),l.a.createElement(k.a,{celled:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Instructor"),l.a.createElement(k.a.HeaderCell,null,"Time"),l.a.createElement(k.a.HeaderCell,null,"Student"),l.a.createElement(k.a.HeaderCell,null,"Instrument"),l.a.createElement(k.a.HeaderCell,null,"Last Attendance"))),l.a.createElement(k.a.Body,null,e.props.lessons.filter(function(e){return e.school.name===t.name&&e.active}).sort(function(e,t){return e.instructor.last_name>t.instructor.last_name?1:e.instructor.last_name<t.instructor.last_name?-1:0}).map(function(t){var n={};t.attendances.length>0&&(n=t.attendances[t.attendances.length-1]);var a=n,r=a.date,s=a.status,c=a.make_up,i=a.cancelled_date;return l.a.createElement(k.a.Row,{key:t.id},l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/instructors/".concat(t.instructor.id)},t.instructor.first_name," ",t.instructor.last_name)),l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/lessons/".concat(t.id)},t.class_time.day," | ",t.class_time.start_time,"-",t.class_time.end_time),e.props.lesson_id!==t.id?l.a.createElement(S.a,{onClick:function(){return e.props.showForm(t)}},"Add an Attendance"):l.a.createElement(S.a,{onClick:function(){return e.props.hideForm()}},"Hide Form"),e.props.lesson_id===t.id?l.a.createElement(D,null):null),l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/students/".concat(t.student.id)},t.student.first_name," ",t.student.last_name)),l.a.createElement(k.a.Cell,null,t.instrument),l.a.createElement(k.a.Cell,null,t.attendances.length>0?"".concat(r," | ").concat(s," ").concat(c?"| Make-up for lesson missed on ".concat(i):""):null))}))))}))}}]),t}(l.a.Component),L={initialFetch:function(){return function(e){var t=new Date;fetch("http://localhost:5000/lessons/day_".concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"][t.getDay()]),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e({type:"AUTHORIZATION_FAIL"}):e(j(t))})}},showForm:function(e){return function(t){return t(H(e))}},hideForm:function(){return function(e){return e(H({class_time:{start_time:""},student:{},instructor:{},attendances:[],school:{},instrument:"",instructor_notes:"",misc_notes:""}))}}},R=Object(p.b)(function(e){return{currentUser:e.currentUser,lessons:e.lessons,lesson_id:e.desiredLesson.id}},L)(U),x=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){l.a.createElement("div",null);return this.props.authorized?l.a.createElement(R,null):l.a.createElement(T,null)}}]),t}(l.a.Component),q=Object(p.b)(function(e){return{authorized:e.currentUser.authorized}})(x),M=n(385),G=n(379),z=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,homeButton:{background:"black"},instructorButton:{background:"black"},studentButton:{background:"black"},familyButton:{background:"black"},clientButton:{background:"black"},logoutButton:{background:"black"}},n.handleHideClick=function(){return n.setState({visible:!1})},n.handleShowClick=function(){return n.setState({visible:!0})},n.handleSidebarHide=function(){return n.setState({visible:!1})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.visible;return this.props.currentUser.authorized?l.a.createElement("div",null,l.a.createElement(S.a.Group,null,l.a.createElement(S.a,{disabled:t,onClick:this.handleShowClick},"Menu")),l.a.createElement(M.a,{as:G.a,animation:"overlay",icon:"labeled",inverted:!0,onHide:this.handleSidebarHide,vertical:!0,visible:t,width:"thin"},l.a.createElement(d.b,{to:"/",onClick:this.handleHideClick},l.a.createElement(G.a.Item,{style:this.state.homeButton,onMouseEnter:function(){return e.setState({homeButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({homeButton:{background:"black"}})}},l.a.createElement(_.a,{name:"home"}),"Home")),l.a.createElement(d.b,{to:"/instructors",onClick:this.handleHideClick},l.a.createElement(G.a.Item,{style:this.state.instructorButton,onMouseEnter:function(){return e.setState({instructorButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({instructorButton:{background:"black"}})}},l.a.createElement(_.a,{name:"microphone"}),"Instructors")),l.a.createElement(d.b,{to:"/students",onClick:this.handleHideClick},l.a.createElement(G.a.Item,{style:this.state.studentButton,onMouseEnter:function(){return e.setState({studentButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({studentButton:{background:"black"}})}},l.a.createElement(_.a,{name:"headphones"}),"Students")),l.a.createElement(d.b,{to:"/families",onClick:this.handleHideClick},l.a.createElement(G.a.Item,{style:this.state.familyButton,onMouseEnter:function(){return e.setState({familyButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({familyButton:{background:"black"}})}},l.a.createElement(_.a,{name:"group"}),"Families")),l.a.createElement(d.b,{to:"/contacts",onClick:this.handleHideClick},l.a.createElement(G.a.Item,{style:this.state.clientButton,onMouseEnter:function(){return e.setState({clientButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({clientButton:{background:"black"}})}},l.a.createElement(_.a,{name:"phone"}),"Contacts")),l.a.createElement(d.b,{to:"/",onClick:function(){e.handleHideClick(),localStorage.setItem("token","logged out"),window.location.reload()}},l.a.createElement(G.a.Item,{style:this.state.logoutButton,onMouseEnter:function(){return e.setState({logoutButton:{background:"gray"}})},onMouseLeave:function(){return e.setState({logoutButton:{background:"black"}})}},l.a.createElement(_.a,{name:"log out"}),"Logout")))):(localStorage.setItem("token","logged out"),l.a.createElement(h.a,{to:"/"}))}}]),t}(l.a.Component),B=Object(p.b)(function(e){return{currentUser:e.currentUser}})(z);function P(e){return{type:"FETCH_DESIRED_STUDENT",student:e}}var Z=n(380),Q=n(47),J=n.n(Q),W=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={searchQuery:"",isLoading:!1},n.setSearchQuery=J()(function(e){console.log(e),n.setState({searchQuery:e,isLoading:!1})},500),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.students;if(""!==this.state.searchQuery){var n=this.state.searchQuery.toUpperCase();t=this.props.students.filter(function(e){return e.first_name.toUpperCase().includes(n)||e.last_name.toUpperCase().includes(n)||e.phone_number.toUpperCase().includes(n)||e.family.family_name.toUpperCase().includes(n)})}return l.a.createElement("div",null,l.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},l.a.createElement(_.a,{name:"headphones"}),l.a.createElement(b.a.Content,null,"Students")),l.a.createElement(Z.a,{open:!1,loading:this.state.isLoading,size:"small",style:{marginLeft:"10px"},placeholder:"Name or Phone Number",onSearchChange:function(t){e.setState({isLoading:!0}),e.setSearchQuery(t.target.value)}}),l.a.createElement(k.a,{celled:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Name"),l.a.createElement(k.a.HeaderCell,null,"Family Name"),l.a.createElement(k.a.HeaderCell,null,"School"),l.a.createElement(k.a.HeaderCell,null,"Phone Number"),l.a.createElement(k.a.HeaderCell,null,"Email"),l.a.createElement(k.a.HeaderCell,null,"Date of Birth"))),l.a.createElement(k.a.Body,null,t.map(function(e){return l.a.createElement(k.a.Row,{key:e.id},l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/students/".concat(e.id)},e.first_name," ",e.last_name)),l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/families/".concat(e.family_id)},e.family.family_name)),l.a.createElement(k.a.Cell,null,e.school.name),l.a.createElement(k.a.Cell,null,e.phone_number),l.a.createElement(k.a.Cell,null,e.email),l.a.createElement(k.a.Cell,null,e.date_of_birth))}))))}},{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:5000/students",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(function(e){return{type:"FETCH_STUDENTS",students:e}}(t))})}}]),t}(l.a.Component),V=Object(p.b)(function(e){return{students:e.students}})(W);function Y(e){return{type:"FETCH_INSTRUCTORS",instructors:e}}function X(e){return{type:"FETCH_DESIRED_INSTRUCTOR",instructor:e}}var K=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={submitted:!1,instructorChosen:!1,instructor_id:null,class_id:null,instrument:null},n.instructorSelect=function(e){null!==e&&fetch("http://localhost:5000/instructors/".concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){e.error?n.props.dispatch({type:"AUTHORIZATION_FAIL"}):(n.props.dispatch(X(e)),n.setState({instructorChosen:!0}))})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(this.state.instrument)if(this.state.class_id){var n=this.state.class_id,a=this.state.instrument,l={class_time_id:n,student_id:this.props.student.id,school_id:this.props.student.school_id,instrument:a,active:!0,instructor_notes:e.instructor_notes.value,misc_notes:e.misc_notes.value};console.log(l),fetch("http://localhost:5000/lessons",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(l)}).then(function(e){return e.json()}).then(function(e){console.log(e),e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(t.props.dispatch(function(e){return{type:"ADD_DESIRED_LESSON",lesson:e}}(e)),t.setState({submitted:!0,instructorChosen:!1,instructor_id:null}),t.intervalID=setInterval(function(){t.setState({submitted:!1})},2e3))})}else alert("Please select a class time");else alert("Please select an instrument")}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.instructors.filter(function(e){return e.active&&e.class_times.length>0&&e.class_times.some(function(e){return e.active})}).map(function(e){return{key:e.id,value:e.id,text:"".concat(e.first_name," ").concat(e.last_name)}}),n=this.props.selectedInstructor,a=n.instrument_1,r=n.instrument_2,s=n.instrument_3,c=n.class_times.filter(function(e){return e.active}).map(function(e){var t=e.start_time.split("T")[1],n="".concat(t.split(":")[0],":").concat(t.split(":")[1]),a=e.end_time.split("T")[1],l="".concat(a.split(":")[0],":").concat(a.split(":")[1]);return{key:e.id,value:e.id,text:"".concat(e.day," | ").concat(n,"-").concat(l)}}),i=[a,r,s].filter(function(e){return""!==e}).map(function(e){return{key:e,value:e,text:e}});return l.a.createElement("div",null,l.a.createElement(y.a,null),l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Select,{id:"instructor",search:!0,required:!0,options:t,value:this.state.instructor_id,label:"Instructor",onChange:function(t,n){e.setState({instructor_id:n.value}),e.instructorSelect(n.value)}}),this.state.instructorChosen?l.a.createElement(g.a.Select,{id:"instrument",required:!0,options:i,value:this.state.instrument,label:"Instrument",onChange:function(t,n){e.setState({instrument:n.value})}}):null,this.state.instructorChosen?l.a.createElement(g.a.Select,{id:"class_time",search:!0,required:!0,options:c,value:this.state.class_id,label:"Class Time",onChange:function(t,n){e.setState({class_id:n.value})}}):null),this.state.instructorChosen?l.a.createElement("div",null,l.a.createElement(g.a.TextArea,{id:"instructor_notes",label:"Instructor Notes"}),l.a.createElement(g.a.TextArea,{id:"misc_notes",label:"Miscellaneous Notes"}),l.a.createElement(S.a,{type:"submit"},"Add Lesson")):null,this.state.submitted?l.a.createElement(N.a,{success:!0,header:"Lesson has been added"}):null),l.a.createElement(y.a,null))}},{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:5000/instructors",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){if(t.error)e.props.dispatch({type:"AUTHORIZATION_FAIL"});else{var n=t.filter(function(t){return t.schools.map(function(e){return e.id}).includes(e.props.student.school_id)&&t.active});e.props.dispatch(Y(n))}})}}]),t}(l.a.Component),$=Object(p.b)(function(e){return{currentUser:e.currentUser,student:e.desiredStudent,instructors:e.instructors,selectedInstructor:e.desiredInstructor}})(K),ee=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={addLessonForm:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(y.a,null),l.a.createElement(b.a,{as:"h2",textAlign:"center"},l.a.createElement(b.a.Content,null,"Lessons"),l.a.createElement("br",null),l.a.createElement(S.a,{onClick:function(){return e.setState({addLessonForm:!e.state.addLessonForm})}},this.state.addLessonForm?"Hide Form":"Add a Lesson")),this.state.addLessonForm?l.a.createElement($,null):null,l.a.createElement(k.a,{celled:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Time"),l.a.createElement(k.a.HeaderCell,null,"Status"),l.a.createElement(k.a.HeaderCell,null,"Instructor"),l.a.createElement(k.a.HeaderCell,null,"Instructor Notes"))),l.a.createElement(k.a.Body,null,this.props.lessons.map(function(e){var t=e.class_time,n=t.day,a=t.start_time,r=t.end_time;return l.a.createElement(k.a.Row,{key:e.id},l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/lessons/".concat(e.id)},n," | ",a,"-",r," | ",e.instrument)),l.a.createElement(k.a.Cell,null,e.active?"Active":"Inactive"),l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/instructors/".concat(e.instructor.id)},e.instructor.first_name," ",e.instructor.last_name)),l.a.createElement(k.a.Cell,null,e.instructor_notes))}))),l.a.createElement(y.a,null))}},{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:5000/lessons/student_".concat(this.props.student_id),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(j(t))})}}]),t}(l.a.Component),te=Object(p.b)(function(e){return{lessons:e.lessons,student_id:e.desiredStudent.id}})(ee),ne=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={old_student:{},success:!1,showLessons:!1},n.handleChange=function(e,t){return n.props.dispatch(function(e,t){return{type:"STUDENT_ONCHANGE",key:e,value:t}}(e,t))},n.handleSubmit=function(){fetch("http://localhost:5000/students/".concat(n.props.student.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n.props.student)}).then(function(e){return e.json()}).then(function(e){n.setState({success:!0,old_student:e}),n.intervalID=setInterval(function(){n.setState({success:!1})},1e3)})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.student,n=t.first_name,a=t.last_name,r=t.phone_number,s=t.email,c=t.date_of_birth,i=t.misc_notes,o=t.medical_notes,u=t.billing_notes,m=t.family_id;return l.a.createElement("div",null,l.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},l.a.createElement(_.a,{name:"headphones"}),l.a.createElement(b.a.Content,null,this.state.old_student.first_name," ",this.state.old_student.last_name),l.a.createElement(d.b,{to:"/families/".concat(m)},l.a.createElement(S.a,null,"Go to Family Page")),l.a.createElement(S.a,{onClick:function(){return e.setState({showLessons:!e.state.showLessons})}},this.state.showLessons?"Hide":"Show"," Lessons")),this.state.showLessons?l.a.createElement(te,null):l.a.createElement(y.a,null),l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(){return e.handleSubmit}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{fluid:!0,label:"First name",value:n,onChange:function(t){return e.handleChange("first_name",t.target.value)}}),l.a.createElement(g.a.Input,{fluid:!0,label:"Last name",value:a,onChange:function(t){return e.handleChange("last_name",t.target.value)}}),l.a.createElement(g.a.Input,{fluid:!0,label:"Date of birth",type:"date",value:c,onChange:function(t){return e.handleChange("date_of_birth",t.target.value)}})),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{fluid:!0,label:"Phone Number",type:"text",value:r,onChange:function(t){return e.handleChange("phone_number",t.target.value)}}),l.a.createElement(g.a.Input,{fluid:!0,label:"Email",type:"email",value:s,onChange:function(t){return e.handleChange("email",t.target.value)}})),l.a.createElement(g.a.TextArea,{label:"Medical Notes",value:o,onChange:function(t){return e.handleChange("medical_notes",t.target.value)}}),l.a.createElement(g.a.TextArea,{label:"Billing Notes",value:u,onChange:function(t){return e.handleChange("billing_notes",t.target.value)}}),l.a.createElement(g.a.TextArea,{label:"Miscellaneous Notes",value:i,onChange:function(t){return e.handleChange("misc_notes",t.target.value)}}),l.a.createElement(S.a,{type:"submit",onClick:this.handleSubmit},"Save Changes"),l.a.createElement(S.a,{onClick:function(){return e.props.dispatch(P(e.state.old_student))}},"Revert Changes"),this.state.success?l.a.createElement(N.a,{success:!0,header:"Changes have been saved"}):null))}},{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/").pop();fetch("http://localhost:5000/students/".concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({old_student:t}),t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(P(t))})}}]),t}(l.a.Component),ae=Object(p.b)(function(e){return{student:e.desiredStudent}})(ne),le=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={school_ids:[],submitted:!1,instructor_id:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(this.state.school_ids.length<=0)alert("Please select at least one school");else{var n={active:!0,schools:this.state.school_ids};["first_name","last_name","date_of_birth","billing_address","pay_rate","phone_number","emergency_number","email","instrument_1","instrument_2","instrument_3","biography","misc_notes"].forEach(function(t){return n[t]=e[t].value}),fetch("http://localhost:5000/instructors",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(alert("The instructor has been added. Confirm to redirect to the instructor's information"),t.setState({submitted:!0,instructor_id:e.id}))})}}},{key:"render",value:function(){var e=this,t=this.props.currentUser.schools.map(function(e){return{key:e.id,value:e.id,text:e.name}});return l.a.createElement("div",null,this.state.submitted?l.a.createElement(h.a,{to:"/instructors/".concat(this.state.instructor_id)}):null,l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{id:"first_name",required:!0,fluid:!0,label:"First name"}),l.a.createElement(g.a.Input,{id:"last_name",required:!0,fluid:!0,label:"Last name"}),l.a.createElement(g.a.Input,{id:"date_of_birth",defaultValue:"2000-01-01",required:!0,fluid:!0,label:"Date of birth",type:"date"})),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{id:"billing_address",fluid:!0,label:"Billing Address"})),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Select,{id:"schools",required:!0,multiple:!0,value:this.state.school_ids,options:t,label:"Schools",onChange:function(t,n){return e.setState({school_ids:n.value})}}),l.a.createElement(g.a.Input,{id:"pay_rate",defaultValue:0,fluid:!0,label:"Pay Rate",type:"number"})),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{id:"phone_number",required:!0,fluid:!0,label:"Phone Number",type:"text"}),l.a.createElement(g.a.Input,{id:"emergency_number",fluid:!0,label:"Emergency Number",type:"tel"}),l.a.createElement(g.a.Input,{id:"email",required:!0,fluid:!0,label:"Email",type:"email"})),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{id:"instrument_1",required:!0,fluid:!0,label:"Instrument 1"}),l.a.createElement(g.a.Input,{id:"instrument_2",fluid:!0,label:"Instrument 2"}),l.a.createElement(g.a.Input,{id:"instrument_3",fluid:!0,label:"Instrument 3"})),l.a.createElement(g.a.TextArea,{id:"biography",label:"Biography"}),l.a.createElement(g.a.TextArea,{id:"misc_notes",label:"Miscellaneous Notes"}),l.a.createElement(S.a,{type:"submit"},"Add Instructor")))}}]),t}(l.a.Component),re=Object(p.b)(function(e){return{currentUser:e.currentUser}})(le),se=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={newForm:!1,searchQuery:"",isLoading:!1},n.setSearchQuery=J()(function(e){n.setState({searchQuery:e,isLoading:!1})},500),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.initialFetch()}},{key:"render",value:function(){var e=this,t=this.props.instructors;if(""!==this.state.searchQuery){var n=this.state.searchQuery.toUpperCase();t=this.props.instructors.filter(function(e){return e.first_name.toUpperCase().includes(n)||e.last_name.toUpperCase().includes(n)||e.instrument_1.toUpperCase().includes(n)||e.instrument_2.toUpperCase().includes(n)||e.instrument_3.toUpperCase().includes(n)})}return l.a.createElement("div",null,l.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},l.a.createElement(_.a,{name:"microphone"}),l.a.createElement(b.a.Content,null,"Instructors"),l.a.createElement(S.a,{onClick:function(){return e.setState({newForm:!e.state.newForm})}},this.state.newForm?"Return to Instructors List":"Add Instructor")),this.state.newForm?null:l.a.createElement(Z.a,{open:!1,loading:this.state.isLoading,size:"small",style:{marginLeft:"10px"},placeholder:"Name or Instrument",onSearchChange:function(t){e.setState({isLoading:!0}),e.setSearchQuery(t.target.value)}}),this.state.newForm?l.a.createElement(re,null):l.a.createElement(k.a,{celled:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Name"),l.a.createElement(k.a.HeaderCell,null,"Schools"),l.a.createElement(k.a.HeaderCell,null,"Active"),l.a.createElement(k.a.HeaderCell,null,"Instruments"),l.a.createElement(k.a.HeaderCell,null,"Phone Number"),l.a.createElement(k.a.HeaderCell,null,"Emergancy Number"),l.a.createElement(k.a.HeaderCell,null,"Email"),l.a.createElement(k.a.HeaderCell,null,"Date of Birth"))),l.a.createElement(k.a.Body,null,t.map(function(e){return l.a.createElement(k.a.Row,{key:e.id},l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/instructors/".concat(e.id)},e.first_name," ",e.last_name)),l.a.createElement(k.a.Cell,null,e.schools.map(function(e){return l.a.createElement("div",{key:e.id},e.name,l.a.createElement("br",null))})),l.a.createElement(k.a.Cell,null,e.active?"Active":"Inactive"),l.a.createElement(k.a.Cell,null,e.instrument_1,l.a.createElement("br",null),e.instrument_2?e.instrument_2:null,l.a.createElement("br",null),e.instrument_3?e.instrument_3:null),l.a.createElement(k.a.Cell,null,e.phone_number),l.a.createElement(k.a.Cell,null,e.emergency_number),l.a.createElement(k.a.Cell,null,e.email),l.a.createElement(k.a.Cell,null,e.date_of_birth))}))))}}]),t}(l.a.Component),ce={initialFetch:function(){return function(e){fetch("http://localhost:5000/instructors",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e({type:"AUTHORIZATION_FAIL"}):e(Y(t))})}}},ie=Object(p.b)(function(e){return{instructors:e.instructors}},ce)(se);var oe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={submitted:!1,school_id:null,day:null},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(this.state.school_id)if(this.state.day){var n={instructor_id:this.props.instructor.id,start_time:e.start_time.value,end_time:e.end_time.value,active:!0,day:this.state.day,school_id:this.state.school_id};fetch("http://localhost:5000/class_times",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(t.props.dispatch(function(e){return{type:"ADD_DESIRED_CLASSTIME",class_time:e}}(e)),t.setState({submitted:!0}),t.intervalID=setInterval(function(){return t.setState({submitted:!1})},3e3))})}else alert("Please select a day");else alert("Please select a school")}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.currentUser.schools.map(function(e){return{key:e.id,value:e.id,text:e.name}}),n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=n.map(function(e){return{key:n.indexOf(e),value:e,text:e}});return l.a.createElement("div",null,l.a.createElement(y.a,null),l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Select,{id:"school",required:!0,options:t,value:this.state.school_id,label:"Schools",onChange:function(t,n){e.setState({school_id:n.value})}}),l.a.createElement(g.a.Select,{id:"day",required:!0,options:a,value:this.state.day,label:"Day",onChange:function(t,n){e.setState({day:n.value})}}),l.a.createElement(g.a.Input,{id:"start_time",required:!0,type:"time",fluid:!0,label:"Start Time"}),l.a.createElement(g.a.Input,{id:"end_time",required:!0,type:"time",fluid:!0,label:"End Time"})),l.a.createElement(S.a,{type:"submit"},"Add Class Time"),this.state.submitted?l.a.createElement(N.a,{success:!0,header:"Class time has been added"}):null),l.a.createElement(y.a,null))}}]),t}(l.a.Component),ue=Object(p.b)(function(e){return{currentUser:e.currentUser,instructor:e.desiredInstructor}})(oe),me=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={active:!0,classForm:!1},n.handleActive=function(e){var t=n.props.class_times.find(function(t){return t.id===e});t&&(t.active&&0!==t.lessons.length&&t.lessons.some(function(e){return e.active})?window.confirm("Are you sure you want to set this class to Inactive? There is at least 1 lesson in the class. If this time is set to inative, all lessons in this time will be set to inactive.")&&n.props.runFetch(t):n.props.runFetch(t))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.initialFetch(this.props.instructor_id)}},{key:"render",value:function(){var e=this,t=[];return t=this.state.active?this.props.class_times.filter(function(e){return e.active}):this.props.class_times.filter(function(e){return!e.active}),l.a.createElement("div",null,l.a.createElement(y.a,null),l.a.createElement(b.a,{as:"h2",textAlign:"center"},l.a.createElement(b.a.Content,null,"Schedule"),l.a.createElement("br",null),l.a.createElement(S.a,{onClick:function(){return e.setState({active:!e.state.active})}},"Show ",this.state.active?"Inactive":"Active"," Class Times"),l.a.createElement(S.a,{onClick:function(){return e.setState({classForm:!e.state.classForm})}},this.state.classForm?"Hide Form":"Add a Class Time")),this.state.classForm?l.a.createElement(ue,null):null,l.a.createElement(k.a,{celled:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Time"),l.a.createElement(k.a.HeaderCell,null,"Students"),l.a.createElement(k.a.HeaderCell,null,"Primary Contact"),l.a.createElement(k.a.HeaderCell,null,"Notes"))),l.a.createElement(k.a.Body,null,t.map(function(t){var n=t.start_time,a=t.end_time,r=n.split("T")[1],s="".concat(r.split(":")[0],":").concat(r.split(":")[1]),c=a.split("T")[1],i="".concat(c.split(":")[0],":").concat(c.split(":")[1]),o=t.students.filter(function(e){return t.lessons.find(function(t){return t.student_id===e.id}).active}),u=t.contacts.filter(function(e){var n=t.students.find(function(t){return t.family_id===e.family_id});return t.lessons.find(function(e){return e.student_id===n.id}).active}),m=t.lessons.filter(function(e){return e.active});return l.a.createElement(k.a.Row,{key:t.id},l.a.createElement(k.a.Cell,null,t.day," | ",t.school.name," | ",s,"-",i," ",l.a.createElement(S.a,{onClick:function(){return e.handleActive(t.id)}},"Set to ",t.active?"Inactive":"Active")),l.a.createElement(k.a.Cell,null,o.map(function(e){var n=t.lessons.find(function(t){return t.student_id===e.id}),a=e.first_name,r=e.last_name;return l.a.createElement("div",{key:e.id},l.a.createElement(d.b,{to:"/students/".concat(e.id)},a," ",r)," | ",l.a.createElement(d.b,{to:"/lessons/".concat(n.id)},"Lesson Details"),t.students[t.students.length-1].id===e.id?l.a.createElement("br",null):l.a.createElement(y.a,null))})),l.a.createElement(k.a.Cell,null,u.map(function(e){var n=e.first_name,a=e.last_name,r=e.phone_number,s=e.email;return l.a.createElement(d.b,{to:"/contacts/".concat(e.id),key:e.id},n," ",a,l.a.createElement("br",null),r,"\xdf",l.a.createElement("br",null),s,l.a.createElement("br",null),t.contacts[t.contacts.length-1].id===e.id?l.a.createElement("br",null):l.a.createElement(y.a,null))})),l.a.createElement(k.a.Cell,null,m.map(function(e){return l.a.createElement("div",{key:e.id},e.instructor_notes,t.lessons[t.lessons.length-1].id===e.id?l.a.createElement("br",null):l.a.createElement(y.a,null))})))}))),l.a.createElement(y.a,null))}}]),t}(l.a.Component),de={initialFetch:function(e){return function(t){fetch("http://localhost:5000/class_times/".concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){e.error?t({type:"AUTHORIZATION_FAIL"}):t(function(e){return{type:"FETCH_DESIRED_CLASSTIMES",class_times:e}}(e))})}},runFetch:function(e){return function(t){fetch("http://localhost:5000/class_times/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({active:!e.active})}).then(function(e){return e.json()}).then(function(e){e.error?t({type:"AUTHORIZATION_FAIL"}):t(function(e){return{type:"UPDATE_DESIRED_CLASSTIME",class_time:e}}(e))})}}},he=Object(p.b)(function(e){return{class_times:e.desiredClassTimes,instructor_id:e.desiredInstructor.id}},de)(me),pe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={old_instructor:{},success:!1,schedule:!1},n.runFetch=function(){fetch("http://localhost:5000/instructors/".concat(n.props.instructor.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n.props.instructor)}).then(function(e){return e.json()}).then(function(e){n.setState({success:!0,old_instructor:e}),n.intervalID=setInterval(function(){n.setState({success:!1})},1e3)})},n.handleChange=function(e,t){return n.props.dispatch(function(e,t){return{type:"INSTRUCTOR_ONCHANGE",key:e,value:t}}(e,t))},n.handleSubmit=function(e){n.state.old_instructor.active&&!n.props.instructor.active?window.confirm("Are you sure you want to set this Instructor to Inactive? All class times and lessons associated with this instructor will be set to inactive.")&&n.runFetch():n.runFetch()},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.instructor,n=t.first_name,a=t.last_name,r=t.instrument_1,s=t.instrument_2,c=t.instrument_3,i=t.phone_number,o=t.emergency_number,u=t.email,m=t.date_of_birth,h=t.billing_address,p=t.pay_rate,f=t.active,E=t.biography,v=t.misc_notes,C=t.schools,I=[];return this.props.currentUser.authorized&&(I=this.props.currentUser.schools.map(function(e){return{key:e.id,value:e.id,text:e.name}})),l.a.createElement("div",null,l.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},l.a.createElement(_.a,{name:"microphone"}),l.a.createElement(b.a.Content,null,this.state.old_instructor.first_name," ",this.state.old_instructor.last_name),l.a.createElement(d.b,{to:"/instructors"},l.a.createElement(S.a,null,"Go to Instructors")),l.a.createElement(S.a,{onClick:function(){return e.setState({schedule:!e.state.schedule})}},this.state.schedule?"Hide":"Show"," Schedule")),this.state.schedule?l.a.createElement(he,null):l.a.createElement(y.a,null),l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t)}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"First name",value:n,onChange:function(t){return e.handleChange("first_name",t.target.value)}}),l.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"Last name",value:a,onChange:function(t){return e.handleChange("last_name",t.target.value)}}),l.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"Date of birth",type:"date",value:m,onChange:function(t){return e.handleChange("date_of_birth",t.target.value)}})),l.a.createElement(g.a.Input,{fluid:!0,label:"Billing Address",value:h,onChange:function(t){return e.handleChange("billing_address",t.target.value)}}),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Dropdown,{required:!0,multiple:!0,selection:!0,options:I,value:C.map(function(e){return e.id}),label:"Schools",onChange:function(t,n){var a=e.props.currentUser.schools.filter(function(e){return n.value.includes(e.id)});e.handleChange("schools",a)}}),l.a.createElement(g.a.Input,{fluid:!0,label:"Pay Rate",type:"number",value:p,onChange:function(t){return e.handleChange("pay_rate",t.target.value)}}),l.a.createElement(g.a.Dropdown,{required:!0,selection:!0,options:[{key:1,value:!0,text:"Active"},{key:2,value:!1,text:"Inactive"}],value:f,label:"Status",onChange:function(t,n){e.handleChange("active",n.value)}})),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"Phone Number",type:"text",value:i,onChange:function(t){return e.handleChange("phone_number",t.target.value)}}),l.a.createElement(g.a.Input,{fluid:!0,label:"Emergency Number",type:"tel",value:o,onChange:function(t){return e.handleChange("emergency_number",t.target.value)}}),l.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"Email",type:"email",value:u,onChange:function(t){return e.handleChange("email",t.target.value)}})),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{required:!0,fluid:!0,label:"Instrument 1",value:r,onChange:function(t){return e.handleChange("instrument_1",t.target.value)}}),l.a.createElement(g.a.Input,{fluid:!0,label:"Instrument 2",value:s,onChange:function(t){return e.handleChange("instrument_2",t.target.value)}}),l.a.createElement(g.a.Input,{fluid:!0,label:"Instrument 3",value:c,onChange:function(t){return e.handleChange("instrument_3",t.target.value)}})),l.a.createElement(g.a.TextArea,{label:"Biography",value:E,onChange:function(t){return e.handleChange("biography",t.target.value)}}),l.a.createElement(g.a.TextArea,{label:"Miscellaneous Notes",value:v,onChange:function(t){return e.handleChange("misc_notes",t.target.value)}}),l.a.createElement(S.a,{type:"submit"},"Save Changes"),l.a.createElement(S.a,{onClick:function(){return e.props.dispatch(X(e.state.old_instructor))}},"Revert Changes"),this.state.success?l.a.createElement(N.a,{success:!0,header:"Changes have been saved"}):null))}},{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/").pop();fetch("http://localhost:5000/instructors/".concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({old_instructor:t}),t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(X(t))})}}]),t}(l.a.Component),fe=Object(p.b)(function(e){return{instructor:e.desiredInstructor,currentUser:e.currentUser}})(pe);function Ee(e){return{type:"FETCH_DESIRED_FAMILY",family:e}}function be(e,t){return{type:"FAMILY_ONCHANGE",key:e,value:t}}var _e=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={submitted:!1,family_id:"",school_id:null},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(this.state.school_id){var n={family_name:e.family_name.value,school_id:this.state.school_id,misc_notes:"",billing_total:0};fetch("http://localhost:5000/families",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):t.setState({submitted:!0,family_id:e.id})})}else alert("Please select a school")}},{key:"render",value:function(){var e=this,t=this.props.currentUser.schools.map(function(e){return{key:e.id,value:e.id,text:e.name}});return l.a.createElement("div",null,this.state.submitted?l.a.createElement(h.a,{to:"/families/".concat(this.state.family_id)}):null,l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Select,{id:"schools",required:!0,options:t,value:this.state.school_id,label:"Schools",onChange:function(t,n){return e.setState({school_id:n.value})}}),l.a.createElement(g.a.Input,{id:"family_name",required:!0,fluid:!0,label:"Family Name"})),l.a.createElement(S.a,{type:"submit"},"Add Family")))}}]),t}(l.a.Component),ye=Object(p.b)(function(e){return{currentUser:e.currentUser}})(_e),ve=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={newForm:!1,searchQuery:"",isLoading:!1},n.setSearchQuery=J()(function(e){n.setState({searchQuery:e,isLoading:!1})},500),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.families;if(""!==this.state.searchQuery){var n=this.state.searchQuery.toUpperCase();t=this.props.families.filter(function(e){return e.family_name.toUpperCase().includes(n)})}return l.a.createElement("div",null,l.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},l.a.createElement(_.a,{name:"group"}),l.a.createElement(b.a.Content,null,"Families"),l.a.createElement(S.a,{onClick:function(){return e.setState({newForm:!e.state.newForm})}},this.state.newForm?"Hide Family Form":"Add a Family")),this.state.newForm?l.a.createElement(ye,null):null,l.a.createElement(Z.a,{open:!1,loading:this.state.isLoading,size:"small",style:{marginLeft:"10px"},placeholder:"Family Name",onSearchChange:function(t){e.setState({isLoading:!0}),e.setSearchQuery(t.target.value)}}),l.a.createElement(k.a,{celled:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Family Name"),l.a.createElement(k.a.HeaderCell,null,"Contacts"),l.a.createElement(k.a.HeaderCell,null,"Students"),l.a.createElement(k.a.HeaderCell,null,"School"),l.a.createElement(k.a.HeaderCell,null,"Billing Total"))),l.a.createElement(k.a.Body,null,t.map(function(e){return l.a.createElement(k.a.Row,{key:e.id},l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/families/".concat(e.id)},e.family_name)),l.a.createElement(k.a.Cell,null,e.contacts.map(function(t){return l.a.createElement(d.b,{to:"/contacts/".concat(t.id),key:t.id},e.contacts[e.contacts.length-1].id===t.id?"".concat(t.first_name," ").concat(t.last_name):"".concat(t.first_name," ").concat(t.last_name,", "))})),l.a.createElement(k.a.Cell,null,e.students.map(function(t){return l.a.createElement(d.b,{to:"/students/".concat(t.id),key:t.id},e.students[e.students.length-1].id===t.id?"".concat(t.first_name," ").concat(t.last_name):"".concat(t.first_name," ").concat(t.last_name,", "))})),l.a.createElement(k.a.Cell,null,e.school.name),l.a.createElement(k.a.Cell,null,e.billing_total))}))))}},{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:5000/families",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return 200===e.status?e.json():console.log("error")}).then(function(t){t?t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(function(e){return{type:"FETCH_FAMILIES",families:e}}(t)):alert("There was an error retrieving the date. If this persists, please contact customer support")})}}]),t}(l.a.Component),ge=Object(p.b)(function(e){return{families:e.families}})(ve),Ce=n(48),Se=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={submitted:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this,n={family_id:this.props.family.id,school_id:this.props.family.school_id};["first_name","last_name","relation_to_students","billing_address","phone_number","emergency_number","email"].forEach(function(t){return n[t]=e[t].value}),fetch("http://localhost:5000/contacts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(t.props.dispatch(be("contacts",[].concat(Object(Ce.a)(t.props.family.contacts),[e]))),t.setState({submitted:!0}),t.intervalID=setInterval(function(){t.setState({submitted:!1})},3e3))})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(y.a,null),l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{id:"first_name",required:!0,fluid:!0,label:"First Name"}),l.a.createElement(g.a.Input,{id:"last_name",required:!0,fluid:!0,label:"Last Name"}),l.a.createElement(g.a.Input,{id:"relation_to_students",required:!0,fluid:!0,label:"Relation to Students"})),l.a.createElement(g.a.Input,{id:"billing_address",fluid:!0,label:"Billing Address"}),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{id:"phone_number",required:!0,fluid:!0,label:"Phone Number"}),l.a.createElement(g.a.Input,{id:"emergency_number",fluid:!0,label:"Emergency Number"}),l.a.createElement(g.a.Input,{id:"email",required:!0,fluid:!0,label:"Email"})),l.a.createElement(S.a,{type:"submit"},"Add Contact"),this.state.submitted?l.a.createElement(N.a,{success:!0,header:"Contact has been added"}):null),l.a.createElement(y.a,null))}}]),t}(l.a.Component),Ie=Object(p.b)(function(e){return{currentUser:e.currentUser,family:e.desiredFamily}})(Se),Oe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={submitted:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this,n={family_id:this.props.family.id,school_id:this.props.family.school_id};["first_name","last_name","date_of_birth","phone_number","misc_notes","medical_notes","billing_notes"].forEach(function(t){return n[t]=e[t].value}),fetch("http://localhost:5000/students",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){e.error?t.props.dispatch({type:"AUTHORIZATION_FAIL"}):(t.props.dispatch(be("students",[].concat(Object(Ce.a)(t.props.family.students),[e]))),t.setState({submitted:!0}),t.intervalID=setInterval(function(){t.setState({submitted:!1})},2e3))})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(y.a,null),l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(t){return e.handleSubmit(t.target)}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{id:"first_name",required:!0,fluid:!0,label:"First Name"}),l.a.createElement(g.a.Input,{id:"last_name",required:!0,fluid:!0,label:"Last Name"}),l.a.createElement(g.a.Input,{id:"date_of_birth",type:"date",required:!0,fluid:!0,label:"Date of Birth"}),l.a.createElement(g.a.Input,{id:"phone_number",fluid:!0,label:"Phone Number"})),l.a.createElement(g.a.TextArea,{id:"billing_notes",label:"Billing Notes"}),l.a.createElement(g.a.TextArea,{id:"medical_notes",label:"Medical Notes"}),l.a.createElement(g.a.TextArea,{id:"misc_notes",label:"Miscellaneous Notes"}),l.a.createElement(S.a,{type:"submit"},"Add Student"),this.state.success?l.a.createElement(N.a,{success:!0,header:"Student has been added"}):null),l.a.createElement(y.a,null))}}]),t}(l.a.Component),Ae=Object(p.b)(function(e){return{currentUser:e.currentUser,family:e.desiredFamily}})(Oe),Te=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={old_family:{},success:!1,studentForm:!1,contactForm:!1},n.handleChange=function(e,t){return n.props.dispatch(be(e,t))},n.handleSubmit=function(){fetch("http://localhost:5000/families/".concat(n.props.family.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n.props.family)}).then(function(e){return e.json()}).then(function(e){n.setState({success:!0,old_family:e}),n.intervalID=setInterval(function(){n.setState({success:!1})},1e3)})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.family,n=t.family_name,a=t.students,r=t.contacts,s=t.misc_notes,c=t.lessons,i=t.class_times,o=t.instructors;return l.a.createElement("div",null,l.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},l.a.createElement(_.a,{name:"group"}),l.a.createElement(b.a.Content,null,this.state.old_family.family_name),l.a.createElement(b.a.Subheader,null,this.props.family.school.name),l.a.createElement(d.b,{to:"/families"},l.a.createElement(S.a,null,"Go to Families"))),l.a.createElement(y.a,null),l.a.createElement(b.a,{as:"h2",textAlign:"center"},l.a.createElement(b.a.Content,null,"Contacts"),l.a.createElement(S.a,{onClick:function(){return e.setState({contactForm:!e.state.contactForm})}},this.state.contactForm?"View Current Contacts":"Add Contact")),this.state.contactForm?l.a.createElement(Ie,null):l.a.createElement(k.a,{celled:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Name"),l.a.createElement(k.a.HeaderCell,null,"Relation to Students"),l.a.createElement(k.a.HeaderCell,null,"Phone Number"),l.a.createElement(k.a.HeaderCell,null,"Email"))),l.a.createElement(k.a.Body,null,r.map(function(e){return l.a.createElement(k.a.Row,{key:e.id},l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/contacts/".concat(e.id)},e.first_name," ",e.last_name)),l.a.createElement(k.a.Cell,null,e.relation_to_students),l.a.createElement(k.a.Cell,null,e.phone_number),l.a.createElement(k.a.Cell,null,e.email))}))),l.a.createElement(b.a,{as:"h2",textAlign:"center"},l.a.createElement(b.a.Content,null,"Students"),l.a.createElement(S.a,{onClick:function(){return e.setState({studentForm:!e.state.studentForm})}},this.state.studentForm?"View Current Students":"Add Student")),this.state.studentForm?l.a.createElement(Ae,null):l.a.createElement(k.a,{celled:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Name"),l.a.createElement(k.a.HeaderCell,null,"Date of Birth"),l.a.createElement(k.a.HeaderCell,null,"Lessons"))),l.a.createElement(k.a.Body,null,a.map(function(e){return l.a.createElement(k.a.Row,{key:e.id},l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/students/".concat(e.id)},e.first_name," ",e.last_name)),l.a.createElement(k.a.Cell,null,e.date_of_birth),l.a.createElement(k.a.Cell,null,c.filter(function(t){return t.student_id===e.id&&t.active}).map(function(e){var t=i.find(function(t){return t.id===e.class_time_id}),n=t.day,a=t.start_time,r=t.end_time,s=t.instructor_id,c=a.split("T")[1],u="".concat(c.split(":")[0],":").concat(c.split(":")[1]),m=r.split("T")[1],h="".concat(m.split(":")[0],":").concat(m.split(":")[1]),p=o.find(function(e){return e.id===s});return l.a.createElement("div",{key:e.id},l.a.createElement(d.b,{to:"/lessons/".concat(e.id)},n," ",u,"-",h)," | ",e.instrument," | ",l.a.createElement(d.b,{to:"/instructors/".concat(p.id)},p.first_name," ",p.last_name),l.a.createElement("br",null))})))}))),l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(){return e.handleSubmit}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{fluid:!0,label:"Family Name",value:n,onChange:function(t){return e.handleChange("family_name",t.target.value)}})),l.a.createElement(g.a.Group,{widths:"equal"}),l.a.createElement(g.a.TextArea,{label:"Miscellaneous Notes",value:s,onChange:function(t){return e.handleChange("misc_notes",t.target.value)}}),l.a.createElement(S.a,{type:"submit",onClick:this.handleSubmit},"Save Changes"),l.a.createElement(S.a,{onClick:function(){return e.props.dispatch(Ee(e.state.old_family))}},"Revert Changes"),this.state.success?l.a.createElement(N.a,{success:!0,header:"Changes have been saved"}):null))}},{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/").pop();fetch("http://localhost:5000/families/".concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({old_family:t}),t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(Ee(t))})}}]),t}(l.a.Component),ke=Object(p.b)(function(e){return{family:e.desiredFamily}})(Te);function je(e){return{type:"FETCH_DESIRED_CONTACT",contact:e}}var we=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={searchQuery:"",isLoading:!1},n.setSearchQuery=J()(function(e){n.setState({searchQuery:e,isLoading:!1})},500),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.contacts.sort(function(e,t){return e.last_name>t.last_name?1:e.last_name<t.last_name?-1:0});if(""!==this.state.searchQuery){var n=this.state.searchQuery.toUpperCase();t=t.filter(function(e){return e.first_name.toUpperCase().includes(n)||e.last_name.toUpperCase().includes(n)||e.phone_number.toUpperCase().includes(n)||e.email.toUpperCase().includes(n)||e.family.family_name.toUpperCase().includes(n)})}return l.a.createElement("div",null,l.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},l.a.createElement(_.a,{name:"phone"}),l.a.createElement(b.a.Content,null,"Contacts")),l.a.createElement(Z.a,{open:!1,loading:this.state.isLoading,size:"small",style:{marginLeft:"10px"},placeholder:"Name, Number, or Email",onSearchChange:function(t){e.setState({isLoading:!0}),e.setSearchQuery(t.target.value)}}),l.a.createElement(k.a,{celled:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Name"),l.a.createElement(k.a.HeaderCell,null,"Family Name"),l.a.createElement(k.a.HeaderCell,null,"Relation To Students"),l.a.createElement(k.a.HeaderCell,null,"Phone Number"),l.a.createElement(k.a.HeaderCell,null,"Email"),l.a.createElement(k.a.HeaderCell,null,"School"))),l.a.createElement(k.a.Body,null,t.map(function(e){return l.a.createElement(k.a.Row,{key:e.id},l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/contacts/".concat(e.id)},e.first_name," ",e.last_name)),l.a.createElement(k.a.Cell,null,l.a.createElement(d.b,{to:"/families/".concat(e.family.id)},e.family.family_name)),l.a.createElement(k.a.Cell,null,e.relation_to_students),l.a.createElement(k.a.Cell,null,e.phone_number),l.a.createElement(k.a.Cell,null,e.email),l.a.createElement(k.a.Cell,null,e.school.name))}))))}},{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:5000/contacts",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(function(e){return{type:"FETCH_CONTACTS",contacts:e}}(t))})}}]),t}(l.a.Component),He=Object(p.b)(function(e){return{contacts:e.contacts}})(we),Ne=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={old_contact:{},success:!1},n.handleChange=function(e,t){return n.props.dispatch(function(e,t){return{type:"CONTACT_ONCHANGE",key:e,value:t}}(e,t))},n.handleSubmit=function(){fetch("http://localhost:5000/contacts/".concat(n.props.contact.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n.props.contact)}).then(function(e){return e.json()}).then(function(e){n.setState({success:!0,old_contact:e}),n.intervalID=setInterval(function(){n.setState({success:!1})},1e3)})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props.contact,n=t.first_name,a=t.last_name,r=t.relation_to_students,s=t.phone_number,c=t.emergency_number,i=t.email,o=t.billing_address,u=t.family_id;return l.a.createElement("div",null,l.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},l.a.createElement(_.a,{name:"phone"}),l.a.createElement(b.a.Content,null,this.state.old_contact.first_name," ",this.state.old_contact.last_name),l.a.createElement(d.b,{to:"/families/".concat(u)},l.a.createElement(S.a,null,"Go to Family Page"))),l.a.createElement(y.a,null),l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(){return e.handleSubmit}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{fluid:!0,label:"First name",value:n,onChange:function(t){return e.handleChange("first_name",t.target.value)}}),l.a.createElement(g.a.Input,{fluid:!0,label:"Last name",value:a,onChange:function(t){return e.handleChange("last_name",t.target.value)}}),l.a.createElement(g.a.Input,{fluid:!0,label:"Relation to Students",value:r,onChange:function(t){return e.handleChange("relation_to_students",t.target.value)}})),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{fluid:!0,label:"Billing Address",value:o,onChange:function(t){return e.handleChange("billing_address",t.target.value)}})),l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{fluid:!0,label:"Phone Number",type:"text",value:s,onChange:function(t){return e.handleChange("phone_number",t.target.value)}}),l.a.createElement(g.a.Input,{fluid:!0,label:"Emergency Number",type:"tel",value:c,onChange:function(t){return e.handleChange("emergency_number",t.target.value)}}),l.a.createElement(g.a.Input,{fluid:!0,label:"Email",type:"email",value:i,onChange:function(t){return e.handleChange("email",t.target.value)}})),l.a.createElement(S.a,{type:"submit",onClick:this.handleSubmit},"Save Changes"),l.a.createElement(S.a,{onClick:function(){return e.props.dispatch(je(e.state.old_contact))}},"Revert Changes"),this.state.success?l.a.createElement(N.a,{success:!0,header:"Changes have been saved"}):null))}},{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/").pop();fetch("http://localhost:5000/contacts/".concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({old_contact:t}),t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(je(t))})}}]),t}(l.a.Component),Fe=Object(p.b)(function(e){return{contact:e.desiredContact}})(Ne),De=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={old_lesson:{},attendanceForm:!1,editAttendance:null},n.handleChange=function(e,t){return n.props.dispatch(function(e,t){return{type:"UPDATE_DESIRED_LESSON",key:e,value:t}}(e,t))},n.handleSubmit=function(){fetch("http://localhost:5000/lessons/".concat(n.props.lesson.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n.props.lesson)}).then(function(e){return e.json()}).then(function(e){n.setState({success:!0,old_lesson:e}),n.intervalID=setInterval(function(){n.setState({success:!1})},1e3)})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleAttendanceSubmit",value:function(e,t){var n=this,a={make_up:parseInt(e.make_up.value)};["date","status","cancelled_date"].forEach(function(t){return a[t]=e[t].value}),fetch("http://localhost:5000/attendances/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){e.error?n.props.dispatch({type:"AUTHORIZATION_FAIL"}):(n.props.dispatch(H(e)),n.props.dispatch(w(e)),n.setState({editAttendance:null}))})}},{key:"render",value:function(){var e=this,t=this.props.lesson,n=t.active,a=t.class_time,r=t.instructor,s=t.student,c=t.school,i=t.instructor_notes,o=t.instrument,u=t.misc_notes,m=t.attendances,h=a.day,p=a.start_time,f=a.end_time;return l.a.createElement("div",null,l.a.createElement(b.a,{as:"h2",icon:!0,textAlign:"center"},l.a.createElement(_.a,{name:"book"}),l.a.createElement(b.a.Content,null,n?null:"(Inactive)"," ",h," | ",p,"-",f," | ",o),l.a.createElement(b.a.Subheader,null,r.first_name," ",r.last_name," teaching ",s.first_name," ",s.last_name," at ",c.name),l.a.createElement(d.b,{to:"/instructors/".concat(r.id)},l.a.createElement(S.a,null,"Go to Instructor")),l.a.createElement(d.b,{to:"/students/".concat(s.id)},l.a.createElement(S.a,null,"Go to Student"))),l.a.createElement(y.a,null),l.a.createElement(g.a,{success:!0,style:{margin:"10px"},onSubmit:function(){return e.handleSubmit}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Dropdown,{required:!0,selection:!0,options:[{key:1,value:!0,text:"Active"},{key:2,value:!1,text:"Inactive"}],value:n,label:"Active",onChange:function(t,n){e.handleChange("active",n.value)}}),l.a.createElement(g.a.Input,{fluid:!0,required:!0,label:"Instrument",value:o,onChange:function(t){return e.handleChange("instrument",t.target.value)}})),l.a.createElement(g.a.TextArea,{label:"Instructor Notes",value:i,onChange:function(t){return e.handleChange("instructor_notes",t.target.value)}}),l.a.createElement(g.a.TextArea,{label:"Miscellaneous Notes",value:u,onChange:function(t){return e.handleChange("misc_notes",t.target.value)}}),l.a.createElement(S.a,{type:"submit",onClick:this.handleSubmit},"Save Changes"),l.a.createElement(S.a,{onClick:function(){return e.props.dispatch(H(e.state.old_lesson))}},"Revert Changes"),this.state.success?l.a.createElement(N.a,{success:!0,header:"Changes have been saved"}):null),l.a.createElement(y.a,null),l.a.createElement(b.a,{as:"h2"},l.a.createElement(b.a.Content,null,"Attendance"),l.a.createElement("br",null),l.a.createElement(S.a,{onClick:function(){return e.setState({attendanceForm:!e.state.attendanceForm})}},this.state.attendanceForm?"Hide Form":"Add a Attendance")),this.state.attendanceForm?l.a.createElement(D,null):null,l.a.createElement(k.a,{celled:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Date"),l.a.createElement(k.a.HeaderCell,null,"Status"),l.a.createElement(k.a.HeaderCell,null,"Make-Up"),l.a.createElement(k.a.HeaderCell,null,"Cancelled Date"))),l.a.createElement(k.a.Body,null,m.map(function(t){return e.state.editAttendance===t.id?l.a.createElement(k.a.Row,{key:t.id},l.a.createElement(k.a.Cell,null,l.a.createElement(g.a,{key:t.id,style:{margin:"10px"},onSubmit:function(n){return e.handleAttendanceSubmit(n.target,t.id)}},l.a.createElement(g.a.Group,{widths:"equal"},l.a.createElement(g.a.Input,{id:"date",type:"date",defaultValue:t.date,required:!0,fluid:!0,label:"Date"}),l.a.createElement(g.a.Input,{id:"status",defaultValue:t.status,required:!0,fluid:!0,label:"Status"}),l.a.createElement(g.a.Input,{id:"make_up",defaultValue:t.make_up?1:0,type:"number",fluid:!0,label:"Make-up Lesson"}),l.a.createElement(g.a.Input,{id:"cancelled_date",type:"date",defaultValue:t.cancelled_date,fluid:!0,label:"Cancelled Date"}),l.a.createElement(S.a,{type:"submit"},"Confirm Attendance"))))):l.a.createElement(k.a.Row,{key:t.id},l.a.createElement(k.a.Cell,null,t.date,e.state.editAttendance===t.id?l.a.createElement(S.a,{onClick:function(){return e.setState({editAttendance:null})}},"Hide Form"):l.a.createElement(S.a,{onClick:function(){return e.setState({editAttendance:t.id})}},"Edit Attendance")),l.a.createElement(k.a.Cell,null,t.status),l.a.createElement(k.a.Cell,null,t.make_up?"Yes":"No"),l.a.createElement(k.a.Cell,null,t.cancelled_date))}))))}},{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/").pop();fetch("http://localhost:5000/lessons/".concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.error?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(H(t)),e.setState({old_lesson:t})})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(H({class_time:{start_time:""},student:{},instructor:{},attendances:[],school:{},instrument:"",instructor_notes:"",misc_notes:""})),clearInterval(this.intervalID)}}]),t}(l.a.Component),Ue=Object(p.b)(function(e){return{lesson:e.desiredLesson}})(De);var Le=function(){return l.a.createElement(b.a,{icon:!0,as:"h2",textAlign:"center"},l.a.createElement(_.a,{name:"bug",circular:!0}),l.a.createElement(b.a.Content,null,"Uh oh...404"),l.a.createElement(b.a.Subheader,null,"This webpage does not exit. You may have the wrong url."))},Re=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(d.a,null,l.a.createElement(B,null),l.a.createElement(h.d,null,l.a.createElement(h.b,{exact:!0,path:"/",render:function(){return l.a.createElement(q,null)}}),l.a.createElement(h.b,{exact:!0,path:"/students",render:function(){return l.a.createElement(V,null)}}),l.a.createElement(h.b,{strict:!0,path:"/students/",render:function(){return l.a.createElement(ae,null)}}),l.a.createElement(h.b,{exact:!0,path:"/instructors",render:function(){return l.a.createElement(ie,null)}}),l.a.createElement(h.b,{strict:!0,path:"/instructors/",render:function(){return l.a.createElement(fe,null)}}),l.a.createElement(h.b,{exact:!0,path:"/families",render:function(){return l.a.createElement(ge,null)}}),l.a.createElement(h.b,{strict:!0,path:"/families/",render:function(){return l.a.createElement(ke,null)}}),l.a.createElement(h.b,{exact:!0,path:"/contacts",render:function(){return l.a.createElement(He,null)}}),l.a.createElement(h.b,{strict:!0,path:"/contacts/",render:function(){return l.a.createElement(Fe,null)}}),l.a.createElement(h.b,{strict:!0,path:"/lessons/",render:function(){return l.a.createElement(Ue,null)}}),l.a.createElement(h.b,{component:function(){return l.a.createElement(Le,null)}})))}},{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:5000/authorize",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({initial:!0})}).then(function(e){return e.json()}).then(function(t){t.error&&"Authorization Error"===t.message?e.props.dispatch({type:"AUTHORIZATION_FAIL"}):e.props.dispatch(f(t))})}}]),t}(l.a.Component),xe=Object(p.b)(function(e){return{authorized:e.currentUser.authorized}})(Re),qe=n(49),Me=n(34),Ge=Object(qe.c)({students:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STUDENTS":return t.students;default:return e}},instructors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_INSTRUCTORS":return t.instructors;default:return e}},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authorized:!0,schools:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHORIZATION_SUCCESS":return Object(E.a)({authorized:!0},t.currentUser);case"AUTHORIZATION_FAIL":return{authorized:!1};default:return e}},lessons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{id:1,class_time:{},instructor:{},school:{}}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_LESSONS":return t.lessons.map(function(e){var t=e.class_time.start_time.split("T")[1],n="".concat(t.split(":")[0],":").concat(t.split(":")[1]),a=e.class_time.end_time.split("T")[1],l="".concat(a.split(":")[0],":").concat(a.split(":")[1]);return Object(E.a)({},e,{class_time:Object(E.a)({},e.class_time,{start_time:n,end_time:l})})}).sort(function(e,t){return parseInt(e.class_time.start_time.split(":")[0]+e.class_time.start_time.split(":")[1])-parseInt(t.class_time.start_time.split(":")[0]+t.class_time.start_time.split(":")[1])});case"UPDATE_LESSONS":var n=t.lesson.class_time.start_time.split("T")[1],a="".concat(n.split(":")[0],":").concat(n.split(":")[1]),l=t.lesson.class_time.end_time.split("T")[1],r="".concat(l.split(":")[0],":").concat(l.split(":")[1]),s=Object(E.a)({},t.lesson,{class_time:Object(E.a)({},t.lesson.class_time,{start_time:a,end_time:r})});return e.map(function(e){return e.id===t.lesson.id?s:e});case"ADD_DESIRED_LESSON":var c=t.lesson.class_time.start_time.split("T")[1],i="".concat(c.split(":")[0],":").concat(c.split(":")[1]),o=t.lesson.class_time.end_time.split("T")[1],u="".concat(o.split(":")[0],":").concat(o.split(":")[1]);return[].concat(Object(Ce.a)(e),[Object(E.a)({},t.lesson,{class_time:Object(E.a)({},t.lesson.class_time,{start_time:i,end_time:u})})]);default:return e}},families:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FAMILIES":return t.families;default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CONTACTS":return t.contacts;default:return e}},desiredInstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{first_name:"",last_name:"",instrument_1:"",instrument_2:"",instrument_3:"",phone_number:"",emergency_number:"",email:"",date_of_birth:"",billing_address:"",pay_rate:"",biography:"",misc_notes:"",class_times:[],schools:[],activeSchedule:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_INSTRUCTOR":return t.instructor;case"INSTRUCTOR_ONCHANGE":return Object(E.a)({},e,Object(Me.a)({},t.key,t.value));case"SCHEDULE_ONCHANGE":return Object(E.a)({},e,{activeSchedule:t.value});default:return e}},desiredStudent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{first_name:"",last_name:"",phone_number:"",email:"",date_of_birth:"",misc_notes:"",medical_notes:"",billing_notes:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_STUDENT":return t.student;case"STUDENT_ONCHANGE":return Object(E.a)({},e,Object(Me.a)({},t.key,t.value));default:return e}},desiredFamily:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{family_name:"",contacts:[],students:[],billing_total:"",school:{name:""}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_FAMILY":return t.family;case"FAMILY_ONCHANGE":return Object(E.a)({},e,Object(Me.a)({},t.key,t.value));default:return e}},desiredContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{first_name:"",last_name:"",relation_to_students:"",phone_number:"",emergency_number:"",email:"",billing_address:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_CONTACT":return t.contact;case"CONTACT_ONCHANGE":return Object(E.a)({},e,Object(Me.a)({},t.key,t.value));default:return e}},desiredClassTimes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{id:1,school:{},students:[],contacts:[],start_time:" T : ",end_time:" T : ",lessons:[]}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_CLASSTIMES":return t.class_times;case"UPDATE_DESIRED_CLASSTIME":return e.map(function(e){return e.id===t.class_time.id?t.class_time:e});case"ADD_DESIRED_CLASSTIME":return[].concat(Object(Ce.a)(e),[t.class_time]);default:return e}},desiredLesson:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{class_time:{start_time:""},student:{},instructor:{},attendances:[],school:{},instrument:"",instructor_notes:"",misc_notes:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DESIRED_LESSON":if(t.lesson.class_time.start_time.length>5){var n=t.lesson.class_time.start_time.split("T")[1],a="".concat(n.split(":")[0],":").concat(n.split(":")[1]),l=t.lesson.class_time.end_time.split("T")[1],r="".concat(l.split(":")[0],":").concat(l.split(":")[1]);return Object(E.a)({},t.lesson,{class_time:Object(E.a)({},t.lesson.class_time,{start_time:a,end_time:r})})}return t.lesson;case"UPDATE_DESIRED_LESSON":return Object(E.a)({},e,Object(Me.a)({},t.key,t.value));case"ATTENDANCE_ADDED":return Object(E.a)({},e,{submitted:t.value});case"MAKE_UP_STATUS":return Object(E.a)({},e,{make_up:t.value});default:return e}}}),ze=n(204),Be=[Object(qe.a)(ze.a)];window.__REDUX_DEVTOOLS_EXTENSION__&&Be.push(window.__REDUX_DEVTOOLS_EXTENSION__());var Pe=qe.d.apply(void 0,Be),Ze=Object(qe.e)(Ge,Pe);s.a.render(l.a.createElement(p.a,{store:Ze},l.a.createElement(xe,null)),document.getElementById("root"))}},[[217,1,2]]]);
//# sourceMappingURL=main.c800ce79.chunk.js.map